[
  {
    "number": 1,
    "title": "Test Login Successful",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/1",
    "utilsCode": "export async function login(page, username, password) {\n  await page.fill('input[placeholder=\"Username\"]', username);\n  await page.fill('input[placeholder=\"Password\"]', password);\n  await page.click('input[type=\"submit\"][value=\"Login\"], button:has-text(\"Login\")');\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { login } from './utils.js';\n\ntest.describe('Login flow', () => {\n  test('successful login with standard_user', async ({ page }) => {\n    await page.goto('https://www.saucedemo.com/');\n    await login(page, 'standard_user', 'secret_sauce');\n    await expect(page).toHaveURL('https://www.saucedemo.com/inventory.html');\n  });\n});",
    "manualSteps": [
      "1. Open a clean browser instance (Chrome/Firefox/Edge) in incognito/private mode.",
      "2. Navigate to https://www.saucedemo.com/ and wait until the page fully loads (verify the URL and that the login form is visible).",
      "3. Locate the Username input field (placeholder=\"Username\") and click into it.",
      "4. Type the exact string standard_user (case-sensitive) into the Username field and verify the text is entered correctly.",
      "5. Locate the Password input field (placeholder=\"Password\") and click into it.",
      "6. Type the exact string secret_sauce into the Password field and verify the text is masked/entered correctly.",
      "7. Locate the Login button (text=\"Login\") and ensure it is enabled.",
      "8. Click the Login button.",
      "9. Wait for the browser to complete navigation and verify the new URL is https://www.saucedemo.com/inventory.html.",
      "10. Confirm that the inventory page loads successfully (e.g., page title contains \"Swag Labs\" and inventory items are displayed).",
      "11. Log the test result as PASSED if all steps complete without error; otherwise, capture console/network logs and screenshots for failure analysis."
    ]
  },
  {
    "number": 1,
    "scenario": "positive",
    "title": "Test Login Successful",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/1",
    "filename": "login_with_standard_user_should_succeed.spec.js",
    "utilsCode": "export async function login(page, username, password) {\n  await page.fill('[data-test=\"username\"]', username);\n  await page.fill('[data-test=\"password\"]', password);\n  await page.click('[data-test=\"login-button\"]');\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { login } from './utils.js';\n\ntest('Login with standard_user should succeed', async ({ page }) => {\n  await page.goto('https://www.saucedemo.com/');\n  await expect(page).toHaveTitle(/Swag Labs/);\n\n  await login(page, 'standard_user', 'secret_sauce');\n\n  await expect(page).toHaveURL('https://www.saucedemo.com/inventory.html');\n  await expect(page.locator('[data-test=\"title\"]')).toHaveText('Products');\n});",
    "manualSteps": [
      "Navigate to https://www.saucedemo.com/",
      "Verify the page title is 'Swag Labs'",
      "Locate the Username input field with placeholder 'Username'",
      "Enter the text 'standard_user' into the Username field",
      "Locate the Password input field with placeholder 'Password'",
      "Enter the text 'secret_sauce' into the Password field",
      "Click the 'Login' button",
      "Wait for the URL to change to https://www.saucedemo.com/inventory.html",
      "Verify the current page URL is https://www.saucedemo.com/inventory.html",
      "Verify the page now displays the text 'Products' in the header"
    ]
  },
  {
    "number": 1,
    "scenario": "negative",
    "title": "Test Login Successful",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/1",
    "filename": "test_login_successful_negative.spec.js",
    "utilsCode": "export async function fillInput(page, selector, value) {\n  await page.fill(selector, value);\n}\n\nexport async function clickButton(page, selector) {\n  await page.click(selector);\n}\n\nexport async function getErrorMessage(page) {\n  const error = await page.locator('[data-test=\"error\"]').textContent();\n  return error?.trim();\n}\n\nexport async function isOnPage(page, url) {\n  return page.url() === url;\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { fillInput, clickButton, getErrorMessage, isOnPage } from './utils.js';\n\ntest.describe('Login - Negative Path', () => {\n  test('should NOT reach inventory page with invalid credentials', async ({ page }) => {\n    await page.goto('https://www.saucedemo.com/');\n    await expect(page).toHaveTitle(/Swag Labs/);\n\n    await fillInput(page, 'input[placeholder=\"Username\"]', 'standard_user');\n    await fillInput(page, 'input[placeholder=\"Password\"]', 'secret_sauce');\n    await clickButton(page, 'input[type=\"submit\"]');\n\n    // Negative assertions\n    const reachedInventory = await isOnPage(page, 'https://www.saucedemo.com/inventory.html');\n    expect(reachedInventory).toBe(false);\n\n    const errorText = await getErrorMessage(page);\n    expect(errorText).toBeTruthy();\n\n    await page.screenshot({ path: 'negative-login-fail.png' });\n  });\n});",
    "manualSteps": [
      "Navigate to https://www.saucedemo.com/",
      "Verify the page title is 'Swag Labs'",
      "Locate the Username input field with placeholder 'Username'",
      "Enter the text 'standard_user' into the Username field",
      "Locate the Password input field with placeholder 'Password'",
      "Enter the text 'secret_sauce' into the Password field",
      "Click the 'Login' button",
      "Verify that the browser URL is NOT https://www.saucedemo.com/inventory.html (negative assertion)",
      "Verify that an error message element is present on the page",
      "Capture the error message text and confirm it is not empty",
      "Take a screenshot of the failed login attempt for evidence"
    ]
  },
  {
    "number": 2,
    "scenario": "positive",
    "title": "Test User Locked",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/2",
    "filename": "test_user_locked_positive.spec.js",
    "utilsCode": "export async function loginWithCredentials(page, username, password) {\n  await page.fill('input[placeholder=\"Username\"]', username);\n  await page.fill('input[placeholder=\"Password\"]', password);\n  await page.click('input[type=\"submit\"]');\n}\n\nexport async function getErrorMessage(page) {\n  const errorLocator = page.locator('[data-test=\"error\"]');\n  await errorLocator.waitFor({ state: 'visible' });\n  return errorLocator.textContent();\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { loginWithCredentials, getErrorMessage } from './utils.js';\n\ntest('Locked-out user sees correct error message', async ({ page }) => {\n  await page.goto('https://www.saucedemo.com/');\n  await loginWithCredentials(page, 'locked_out_user', 'secret_sauce');\n  const message = await getErrorMessage(page);\n  expect(message).toBe('Epic sadface: Sorry, this user has been locked out.');\n});",
    "manualSteps": [
      "Navigate to https://www.saucedemo.com/",
      "Wait until the login form is fully rendered",
      "Locate the Username input field by its placeholder text 'Username'",
      "Enter the exact text locked_out_user into the Username field",
      "Locate the Password input field by its placeholder text 'Password'",
      "Enter the exact text secret_sauce into the Password field",
      "Locate the Login button",
      "Click the Login button",
      "Wait for the error container to appear",
      "Assert that the error container is visible",
      "Assert that the error text is exactly Epic sadface: Sorry, this user has been locked out.",
      "Take a screenshot of the error for evidence (optional but recommended)",
      "Mark the test as passed if all assertions are true"
    ]
  },
  {
    "number": 6,
    "title": "Add the item to the checkout",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/6",
    "utilsCode": "export async function safeGoto(page, url) {\n  await page.goto(url, { waitUntil: 'networkidle' });\n}\n\nexport async function addFirstItemToCart(page) {\n  const addBtn = page.locator('[data-test=\"add-to-cart-sauce-labs-backpack\"]').first();\n  await addBtn.waitFor({ state: 'visible' });\n  await addBtn.click();\n  await waitForCartBadge(page, 1);\n}\n\nexport async function waitForCartBadge(page, expectedCount) {\n  const badge = page.locator('.shopping_cart_badge');\n  await badge.waitFor({ state: 'visible' });\n  await expect(badge).toHaveText(String(expectedCount));\n}\n\nexport async function getCartAmount(page) {\n  const totalLabel = page.locator('.summary_total_label');\n  await totalLabel.waitFor({ state: 'visible' });\n  return totalLabel.textContent().then(t => t.trim());\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { addFirstItemToCart, safeGoto, waitForCartBadge, getCartAmount } from '../utils.js';\n\ntest.describe('Negative flow: Add first item to cart and validate checkout amount', () => {\n  test('should fail gracefully when network is offline @offline', async ({ page, context }) => {\n    await safeGoto(page, '/inventory.html');\n    await context.setOffline(true);\n    const addBtn = page.locator('[data-test=\"add-to-cart-sauce-labs-backpack\"]').first();\n    await addBtn.click();\n    await expect(page.locator('.shopping_cart_badge')).toHaveCount(0);\n    await context.setOffline(false);\n  });\n\n  test('should block cart endpoint and show error @blockCart', async ({ page, browser }) => {\n    const ctx = browser.contexts()[0];\n    await ctx.route('**/cart/**', route => route.abort('failed'));\n    await safeGoto(page, '/inventory.html');\n    const addBtn = page.locator('[data-test=\"add-to-cart-sauce-labs-backpack\"]').first();\n    await addBtn.click();\n    await expect(page.locator('.error-message-container')).toContainText(/unable.*add/i);\n    await expect(page.locator('.shopping_cart_badge')).toHaveCount(0);\n  });\n\n  test('should prevent double-click adding twice @doubleClick', async ({ page }) => {\n    await safeGoto(page, '/inventory.html');\n    const addBtn = page.locator('[data-test=\"add-to-cart-sauce-labs-backpack\"]').first();\n    await addBtn.dblclick();\n    await waitForCartBadge(page, 1);\n  });\n\n  test('should reject checkout with empty first name @emptyForm', async ({ page }) => {\n    await safeGoto(page, '/inventory.html');\n    await addFirstItemToCart(page);\n    await page.click('.shopping_cart_container');\n    await page.click('[data-test=\"checkout\"]');\n    await page.click('[data-test=\"continue\"]');\n    await expect(page.locator('[data-test=\"error\"]')).toContainText(/first name is required/i);\n  });\n\n  test('should reject 51-char first name @maxLength', async ({ page }) => {\n    await safeGoto(page, '/inventory.html');\n    await addFirstItemToCart(page);\n    await page.click('.shopping_cart_container');\n    await page.click('[data-test=\"checkout\"]');\n    const longName = 'a'.repeat(51);\n    await page.fill('[data-test=\"firstName\"]', longName);\n    await page.fill('[data-test=\"lastName\"]', 'ValidLast');\n    await page.fill('[data-test=\"postalCode\"]', '12345');\n    await page.click('[data-test=\"continue\"]');\n    await expect(page.locator('[data-test=\"error\"]')).toContainText(/first name.*too long/i);\n  });\n\n  test('should enforce exact amount 29.99 in checkout overview @amount', async ({ page }) => {\n    await safeGoto(page, '/inventory.html');\n    await addFirstItemToCart(page);\n    await page.click('.shopping_cart_container');\n    await page.click('[data-test=\"checkout\"]');\n    await page.fill('[data-test=\"firstName\"]', 'Jane');\n    await page.fill('[data-test=\"lastName\"]', 'Doe');\n    await page.fill('[data-test=\"postalCode\"]', '12345');\n    await page.click('[data-test=\"continue\"]');\n    const total = await getCartAmount(page);\n    expect(total).toBe('$29.99');\n  });\n});",
    "manualSteps": [
      "1. Open the site in a private/incognito window to ensure no cached state exists.",
      "2. Land on the inventory page (do NOT log in via the standard page).",
      "3. Verify that the first inventory item’s ‘Add to cart’ button is visible and enabled.",
      "4. Disable JavaScript in DevTools → try to click the button → verify nothing is added (cart badge should remain empty).",
      "5. Re-enable JavaScript and refresh the page.",
      "6. Disconnect the network (e.g., airplane mode) → click ‘Add to cart’ → verify graceful failure (no crash, button state unchanged, no console 5xx).",
      "7. Reconnect the network and refresh.",
      "8. Open DevTools → Network → block the cart endpoint (*/cart/*) → click ‘Add to cart’ → verify error toast/inline message appears and badge stays empty.",
      "9. Remove the network block and refresh.",
      "10. Rapidly double-click the ‘Add to cart’ button within 200 ms → verify only one item is added (badge = 1).",
      "11. Click the browser-back button immediately after adding → verify the cart state persists (badge still 1).",
      "12. Click the cart icon → verify navigation to checkout-step-one occurs.",
      "13. On checkout-step-one, verify the item name, description, and price are displayed.",
      "14. Change the price in the DOM via DevTools to $0.01 → verify the UI still shows $29.99 (client-side validation).",
      "15. Remove the item from the cart → verify the cart icon badge disappears.",
      "16. Add the item again → proceed to checkout.",
      "17. In another tab, log in as a different user → add the same item → verify the stock count decreases appropriately (no negative stock).",
      "18. Return to the first tab → refresh → verify the item is still in the cart (session isolation).",
      "19. Click ‘Remove’ in the cart → verify the cart page shows ‘Cart is empty’ message.",
      "20. Click browser-back → verify the inventory page no longer shows the item as added.",
      "21. Add the item once more → open the cart → click ‘Checkout’ → on the info form, leave all fields blank → click ‘Continue’ → verify inline validation errors appear for each mandatory field.",
      "22. Fill the first-name field with 51 characters → verify a max-length error appears.",
      "23. Clear the first-name field → enter only spaces → verify validation rejects it.",
      "24. Enter valid data → proceed to checkout-step-two → verify the total amount is exactly $29.99 (no tax rounding errors).",
      "25. Open DevTools → override the price to –$10 → verify the UI still shows $29.99 (server-side truth).",
      "26. Finish the purchase → verify the thank-you page appears → click browser-back → verify the cart is now empty and the item cannot be re-added with a stale state."
    ]
  }
]
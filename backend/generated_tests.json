[
  {
    "number": 1,
    "title": "Test Login Successful",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/1",
    "utilsCode": "export async function login(page, username, password) {\n  await page.locator('[data-test=\"username\"]').fill(username);\n  await page.locator('[data-test=\"password\"]').fill(password);\n  await page.locator('[data-test=\"login-button\"]').click();\n}\n\nexport async function checkErrorMessage(page, expectedText) {\n  const errorLocator = page.locator('[data-test=\"error\"]');\n  await expect(errorLocator).toBeVisible();\n  await expect(errorLocator).toContainText(expectedText);\n}\n\nexport async function resetPage(page) {\n  await page.reload();\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { login, checkErrorMessage, resetPage } from './utils.js';\n\ntest.describe('Login Negative Flows', () => {\n  test.beforeEach(async ({ page }) => {\n    await page.goto('https://www.saucedemo.com/');\n  });\n\n  test('Empty username shows error', async ({ page }) => {\n    await login(page, '', '');\n    await checkErrorMessage(page, 'Username is required');\n  });\n\n  test('Empty password shows error', async ({ page }) => {\n    await login(page, 'fake_user', '');\n    await checkErrorMessage(page, 'Password is required');\n  });\n\n  test('Locked out user shows error', async ({ page }) => {\n    await login(page, 'locked_out_user', 'secret_sauce');\n    await checkErrorMessage(page, 'Sorry, this user has been locked out');\n  });\n\n  test('Invalid password shows error', async ({ page }) => {\n    await login(page, 'standard_user', 'wrong_password');\n    await checkErrorMessage(page, 'Username and password do not match any user in this service');\n  });\n\n  test('SQL injection attempt fails gracefully', async ({ page }) => {\n    await login(page, \"' OR 1=1--\", \"' OR 1=1--\");\n    await checkErrorMessage(page, 'Username and password do not match any user in this service');\n  });\n\n  test('XSS payload is sanitized', async ({ page }) => {\n    await login(page, \"<script>alert('xss')</script>\", 'anypass');\n    await checkErrorMessage(page, 'Username and password do not match any user in this service');\n    const hasAlert = await page.evaluate(() => window.alert !== undefined);\n    expect(hasAlert).toBe(true); // alert exists but should not be called\n    const alertCalled = await page.evaluate(() => {\n      let called = false;\n      const original = window.alert;\n      window.alert = () => { called = true; };\n      return called;\n    });\n    expect(alertCalled).toBe(false);\n  });\n\n  test('Extremely long input handled gracefully', async ({ page }) => {\n    const longString = 'a'.repeat(1100);\n    await login(page, longString, longString);\n    await checkErrorMessage(page, 'Username and password do not match any user in this service');\n  });\n\n  test('Network failure shows error', async ({ page }) => {\n    await page.route('**/*', (route) => route.abort('internetdisconnected'));\n    await login(page, 'standard_user', 'secret_sauce');\n    await expect(page.locator('[data-test=\"error\"]')).toContainText('Network error');\n  });\n\n  test('Login button removed from DOM prevents submission', async ({ page }) => {\n    await page.locator('[data-test=\"username\"]').fill('standard_user');\n    await page.locator('[data-test=\"password\"]').fill('secret_sauce');\n    await page.evaluate(() => document.querySelector('[data-test=\"login-button\"]').remove());\n    await page.locator('[data-test=\"password\"]').press('Enter');\n    await expect(page).toHaveURL('https://www.saucedemo.com/');\n  });\n});",
    "manualSteps": [
      "1. Navigate to https://www.saucedemo.com/",
      "2. Verify the login form is visible.",
      "3. Leave the username field empty and click the Login button.",
      "4. Verify an error message appears indicating 'Username is required'.",
      "5. Refresh the page to reset the form.",
      "6. Enter a non-existent username (e.g., 'fake_user') in the username field.",
      "7. Leave the password field empty and click the Login button.",
      "8. Verify an error message appears indicating 'Password is required'.",
      "9. Refresh the page to reset the form.",
      "10. Enter the locked-out user credentials: username 'locked_out_user' and password 'secret_sauce'.",
      "11. Click the Login button.",
      "12. Verify an error message appears indicating 'Sorry, this user has been locked out'.",
      "13. Refresh the page to reset the form.",
      "14. Enter an invalid password for the standard user: username 'standard_user' and password 'wrong_password'.",
      "15. Click the Login button.",
      "16. Verify an error message appears indicating 'Username and password do not match any user in this service'.",
      "17. Refresh the page to reset the form.",
      "18. Enter SQL injection strings in both fields: username \"' OR 1=1--\" and password \"' OR 1=1--\".",
      "19. Click the Login button.",
      "20. Verify an error message appears indicating invalid credentials.",
      "21. Refresh the page to reset the form.",
      "22. Enter XSS payload in the username field: \"<script>alert('xss')</script>\" and any password.",
      "23. Click the Login button.",
      "24. Verify the script is not executed and an invalid credentials error is shown.",
      "25. Refresh the page to reset the form.",
      "26. Enter extremely long strings (e.g., 1000+ characters) in both username and password fields.",
      "27. Click the Login button.",
      "28. Verify the application handles the input gracefully without crashing.",
      "29. Refresh the page to reset the form.",
      "30. Enter valid username 'standard_user' and password 'secret_sauce' but disable network in browser devtools before clicking Login.",
      "31. Click the Login button.",
      "32. Verify an appropriate network error message is shown.",
      "33. Re-enable network and refresh the page.",
      "34. Enter valid username 'standard_user' and password 'secret_sauce'.",
      "35. Right-click the Login button and select 'Inspect Element'.",
      "36. Delete the Login button element from the DOM.",
      "37. Attempt to submit the form by pressing Enter in the password field.",
      "38. Verify the form cannot be submitted and no navigation occurs."
    ]
  },
  {
    "number": 1,
    "scenario": "positive",
    "title": "Test Login Successful",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/1",
    "filename": "test_login_successful.spec.js",
    "utilsCode": "export async function fillText(page, selector, text) {\n  await page.fill(selector, text);\n}\n\nexport async function clickElement(page, selector) {\n  await page.click(selector);\n}\n\nexport async function assertUrl(page, expectedUrl) {\n  await page.waitForURL(expectedUrl);\n}\n\nexport async function assertText(page, selector, expectedText) {\n  await page.waitForSelector(selector);\n  const text = await page.textContent(selector);\n  if (!text.includes(expectedText)) {\n    throw new Error(`Expected text \"${expectedText}\" not found in \"${text}\"`);\n  }\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { fillText, clickElement, assertUrl, assertText } from '../utils.js';\n\ntest('Test Login Successful', async ({ page }) => {\n  await page.goto('https://www.saucedemo.com');\n  await expect(page).toHaveTitle(/Swag Labs/);\n  \n  await fillText(page, 'input[placeholder=\"Username\"]', 'standard_user');\n  await fillText(page, 'input[placeholder=\"Password\"]', 'secret_sauce');\n  await clickElement(page, 'input[type=\"submit\"]');\n  \n  await assertUrl(page, 'https://www.saucedemo.com/inventory.html');\n  await assertText(page, 'span.title', 'Products');\n});",
    "manualSteps": [
      "Navigate to https://www.saucedemo.com",
      "Verify the page title contains 'Swag Labs'",
      "Locate the Username input field with placeholder 'Username'",
      "Enter the text 'standard_user' into the Username field",
      "Locate the Password input field with placeholder 'Password'",
      "Enter the text 'secret_sauce' into the Password field",
      "Click the Login button",
      "Wait for the URL to change to https://www.saucedemo.com/inventory.html",
      "Verify the current URL is https://www.saucedemo.com/inventory.html",
      "Verify the page contains the text 'Products' in the header"
    ]
  },
  {
    "number": 1,
    "scenario": "negative",
    "title": "Test Login Successful",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/1",
    "filename": "test_login_successful_negative.spec.js",
    "utilsCode": "export async function fillInput(page, selector, value) {\n  await page.fill(selector, value);\n}\n\nexport async function clickButton(page, selector) {\n  await page.click(selector);\n}\n\nexport async function getErrorMessage(page) {\n  const error = await page.locator('[data-test=\"error\"]').textContent();\n  return error?.trim();\n}\n\nexport async function isOnPage(page, url) {\n  return page.url() === url;\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { fillInput, clickButton, getErrorMessage, isOnPage } from './utils.js';\n\ntest.describe('Login - Negative Path', () => {\n  test('should NOT reach inventory page with invalid credentials', async ({ page }) => {\n    await page.goto('https://www.saucedemo.com/');\n    await expect(page).toHaveTitle(/Swag Labs/);\n\n    await fillInput(page, 'input[placeholder=\"Username\"]', 'standard_user');\n    await fillInput(page, 'input[placeholder=\"Password\"]', 'secret_sauce');\n    await clickButton(page, 'input[type=\"submit\"]');\n\n    // Negative assertions\n    const reachedInventory = await isOnPage(page, 'https://www.saucedemo.com/inventory.html');\n    expect(reachedInventory).toBe(false);\n\n    const errorText = await getErrorMessage(page);\n    expect(errorText).toBeTruthy();\n\n    await page.screenshot({ path: 'negative-login-fail.png' });\n  });\n});",
    "manualSteps": [
      "Navigate to https://www.saucedemo.com/",
      "Verify the page title is 'Swag Labs'",
      "Locate the Username input field with placeholder 'Username'",
      "Enter the text 'standard_user' into the Username field",
      "Locate the Password input field with placeholder 'Password'",
      "Enter the text 'secret_sauce' into the Password field",
      "Click the 'Login' button",
      "Verify that the browser URL is NOT https://www.saucedemo.com/inventory.html (negative assertion)",
      "Verify that an error message element is present on the page",
      "Capture the error message text and confirm it is not empty",
      "Take a screenshot of the failed login attempt for evidence"
    ]
  },
  {
    "number": 2,
    "scenario": "positive",
    "title": "Test User Locked",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/2",
    "filename": "test_user_locked_positive.spec.js",
    "utilsCode": "export async function loginWithCredentials(page, username, password) {\n  await page.fill('input[placeholder=\"Username\"]', username);\n  await page.fill('input[placeholder=\"Password\"]', password);\n  await page.click('input[type=\"submit\"]');\n}\n\nexport async function getErrorMessage(page) {\n  const errorLocator = page.locator('[data-test=\"error\"]');\n  await errorLocator.waitFor({ state: 'visible' });\n  return errorLocator.textContent();\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { loginWithCredentials, getErrorMessage } from './utils.js';\n\ntest('Locked-out user sees correct error message', async ({ page }) => {\n  await page.goto('https://www.saucedemo.com/');\n  await loginWithCredentials(page, 'locked_out_user', 'secret_sauce');\n  const message = await getErrorMessage(page);\n  expect(message).toBe('Epic sadface: Sorry, this user has been locked out.');\n});",
    "manualSteps": [
      "Navigate to https://www.saucedemo.com/",
      "Wait until the login form is fully rendered",
      "Locate the Username input field by its placeholder text 'Username'",
      "Enter the exact text locked_out_user into the Username field",
      "Locate the Password input field by its placeholder text 'Password'",
      "Enter the exact text secret_sauce into the Password field",
      "Locate the Login button",
      "Click the Login button",
      "Wait for the error container to appear",
      "Assert that the error container is visible",
      "Assert that the error text is exactly Epic sadface: Sorry, this user has been locked out.",
      "Take a screenshot of the error for evidence (optional but recommended)",
      "Mark the test as passed if all assertions are true"
    ]
  }
]
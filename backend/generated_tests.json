[
  {
    "number": 1,
    "title": "Test Login Successful",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/1",
    "utilsCode": "export async function login(page, username, password) {\n  await page.fill('input[placeholder=\"Username\"]', username);\n  await page.fill('input[placeholder=\"Password\"]', password);\n  await page.click('input[type=\"submit\"][value=\"Login\"], button:has-text(\"Login\")');\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { login } from './utils.js';\n\ntest.describe('Login flow', () => {\n  test('successful login with standard_user', async ({ page }) => {\n    await page.goto('https://www.saucedemo.com/');\n    await login(page, 'standard_user', 'secret_sauce');\n    await expect(page).toHaveURL('https://www.saucedemo.com/inventory.html');\n  });\n});",
    "manualSteps": [
      "1. Open a clean browser instance (Chrome/Firefox/Edge) in incognito/private mode.",
      "2. Navigate to https://www.saucedemo.com/ and wait until the page fully loads (verify the URL and that the login form is visible).",
      "3. Locate the Username input field (placeholder=\"Username\") and click into it.",
      "4. Type the exact string standard_user (case-sensitive) into the Username field and verify the text is entered correctly.",
      "5. Locate the Password input field (placeholder=\"Password\") and click into it.",
      "6. Type the exact string secret_sauce into the Password field and verify the text is masked/entered correctly.",
      "7. Locate the Login button (text=\"Login\") and ensure it is enabled.",
      "8. Click the Login button.",
      "9. Wait for the browser to complete navigation and verify the new URL is https://www.saucedemo.com/inventory.html.",
      "10. Confirm that the inventory page loads successfully (e.g., page title contains \"Swag Labs\" and inventory items are displayed).",
      "11. Log the test result as PASSED if all steps complete without error; otherwise, capture console/network logs and screenshots for failure analysis."
    ]
  },
  {
    "number": 1,
    "scenario": "positive",
    "title": "Test Login Successful",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/1",
    "filename": "login_with_standard_user_should_succeed.spec.js",
    "utilsCode": "export async function login(page, username, password) {\n  await page.fill('[data-test=\"username\"]', username);\n  await page.fill('[data-test=\"password\"]', password);\n  await page.click('[data-test=\"login-button\"]');\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { login } from './utils.js';\n\ntest('Login with standard_user should succeed', async ({ page }) => {\n  await page.goto('https://www.saucedemo.com/');\n  await expect(page).toHaveTitle(/Swag Labs/);\n\n  await login(page, 'standard_user', 'secret_sauce');\n\n  await expect(page).toHaveURL('https://www.saucedemo.com/inventory.html');\n  await expect(page.locator('[data-test=\"title\"]')).toHaveText('Products');\n});",
    "manualSteps": [
      "Navigate to https://www.saucedemo.com/",
      "Verify the page title is 'Swag Labs'",
      "Locate the Username input field with placeholder 'Username'",
      "Enter the text 'standard_user' into the Username field",
      "Locate the Password input field with placeholder 'Password'",
      "Enter the text 'secret_sauce' into the Password field",
      "Click the 'Login' button",
      "Wait for the URL to change to https://www.saucedemo.com/inventory.html",
      "Verify the current page URL is https://www.saucedemo.com/inventory.html",
      "Verify the page now displays the text 'Products' in the header"
    ]
  },
  {
    "number": 1,
    "scenario": "negative",
    "title": "Test Login Successful",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/1",
    "filename": "test_login_successful_negative.spec.js",
    "utilsCode": "export async function fillInput(page, selector, value) {\n  await page.fill(selector, value);\n}\n\nexport async function clickButton(page, selector) {\n  await page.click(selector);\n}\n\nexport async function getErrorMessage(page) {\n  const error = await page.locator('[data-test=\"error\"]').textContent();\n  return error?.trim();\n}\n\nexport async function isOnPage(page, url) {\n  return page.url() === url;\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { fillInput, clickButton, getErrorMessage, isOnPage } from './utils.js';\n\ntest.describe('Login - Negative Path', () => {\n  test('should NOT reach inventory page with invalid credentials', async ({ page }) => {\n    await page.goto('https://www.saucedemo.com/');\n    await expect(page).toHaveTitle(/Swag Labs/);\n\n    await fillInput(page, 'input[placeholder=\"Username\"]', 'standard_user');\n    await fillInput(page, 'input[placeholder=\"Password\"]', 'secret_sauce');\n    await clickButton(page, 'input[type=\"submit\"]');\n\n    // Negative assertions\n    const reachedInventory = await isOnPage(page, 'https://www.saucedemo.com/inventory.html');\n    expect(reachedInventory).toBe(false);\n\n    const errorText = await getErrorMessage(page);\n    expect(errorText).toBeTruthy();\n\n    await page.screenshot({ path: 'negative-login-fail.png' });\n  });\n});",
    "manualSteps": [
      "Navigate to https://www.saucedemo.com/",
      "Verify the page title is 'Swag Labs'",
      "Locate the Username input field with placeholder 'Username'",
      "Enter the text 'standard_user' into the Username field",
      "Locate the Password input field with placeholder 'Password'",
      "Enter the text 'secret_sauce' into the Password field",
      "Click the 'Login' button",
      "Verify that the browser URL is NOT https://www.saucedemo.com/inventory.html (negative assertion)",
      "Verify that an error message element is present on the page",
      "Capture the error message text and confirm it is not empty",
      "Take a screenshot of the failed login attempt for evidence"
    ]
  },
  {
    "number": 2,
    "scenario": "positive",
    "title": "Test User Locked",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/2",
    "filename": "test_user_locked_positive.spec.js",
    "utilsCode": "export async function loginWithCredentials(page, username, password) {\n  await page.fill('input[placeholder=\"Username\"]', username);\n  await page.fill('input[placeholder=\"Password\"]', password);\n  await page.click('input[type=\"submit\"]');\n}\n\nexport async function getErrorMessage(page) {\n  const errorLocator = page.locator('[data-test=\"error\"]');\n  await errorLocator.waitFor({ state: 'visible' });\n  return errorLocator.textContent();\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { loginWithCredentials, getErrorMessage } from './utils.js';\n\ntest('Locked-out user sees correct error message', async ({ page }) => {\n  await page.goto('https://www.saucedemo.com/');\n  await loginWithCredentials(page, 'locked_out_user', 'secret_sauce');\n  const message = await getErrorMessage(page);\n  expect(message).toBe('Epic sadface: Sorry, this user has been locked out.');\n});",
    "manualSteps": [
      "Navigate to https://www.saucedemo.com/",
      "Wait until the login form is fully rendered",
      "Locate the Username input field by its placeholder text 'Username'",
      "Enter the exact text locked_out_user into the Username field",
      "Locate the Password input field by its placeholder text 'Password'",
      "Enter the exact text secret_sauce into the Password field",
      "Locate the Login button",
      "Click the Login button",
      "Wait for the error container to appear",
      "Assert that the error container is visible",
      "Assert that the error text is exactly Epic sadface: Sorry, this user has been locked out.",
      "Take a screenshot of the error for evidence (optional but recommended)",
      "Mark the test as passed if all assertions are true"
    ]
  },
  {
    "number": 6,
    "title": "Add the item to the checkout",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/6",
    "utilsCode": "export async function addFirstItemToCart(page) {\n  const btn = page.locator('[data-test^=\"add-to-cart\"]').first();\n  await btn.waitFor({ state: 'visible' });\n  await btn.click();\n}\n\nexport async function openCart(page) {\n  await page.click('[data-test=\"shopping-cart-container\"]');\n  await page.waitForURL('**/cart.html');\n}\n\nexport async function getCartBadge(page) {\n  const badge = page.locator('.shopping_cart_badge');\n  if (!(await badge.isVisible())) return 0;\n  return parseInt(await badge.textContent(), 10);\n}\n\nexport async function getItemPrice(page) {\n  return page.locator('.inventory_item_price').first().textContent();\n}\n\nexport async function removeCartFromLocalStorage(page) {\n  await page.evaluate(() => localStorage.removeItem('cart-contents'));\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { addFirstItemToCart, openCart, getCartBadge, getItemPrice, removeCartFromLocalStorage } from './utils.js';\n\ntest.describe('Negative flow: add item to checkout', () => {\n  test('should NOT show $29.99 in cart after adding first item', async ({ page }) => {\n    await page.goto('/inventory.html', { waitUntil: 'networkidle' });\n\n    // Ensure at least one item exists\n    const firstAddButton = page.locator('[data-test=\"add-to-cart-sauce-labs-backpack\"]').first();\n    await expect(firstAddButton).toBeVisible();\n\n    // Simulate network failure on add\n    await page.route('**/cart', route => route.abort('failed'));\n    await firstAddButton.click();\n    await expect(firstAddButton).toHaveText('Add to cart'); // still visible due to failure\n\n    // Re-enable network and retry\n    await page.unroute('**/cart');\n    await firstAddButton.click();\n    await expect(page.locator('.shopping_cart_badge')).toHaveText('1');\n\n    // Navigate to cart and assert negative price\n    await openCart(page);\n    const price = await getItemPrice(page);\n    expect(price).not.toBe('$29.99');\n\n    // Edge case: remove cart from localStorage and refresh\n    await removeCartFromLocalStorage(page);\n    await page.reload();\n    expect(await getCartBadge(page)).toBe(0);\n  });\n});",
    "manualSteps": [
      "1. Open the browser and navigate to the inventory page (ensure the page is fully loaded).",
      "2. Verify that at least one inventory item is displayed; if none are present, log a failure and stop the test.",
      "3. Locate the first inventory item’s ‘Add to cart’ button and confirm it is visible and enabled.",
      "4. Click the ‘Add to cart’ button and immediately disable the network (e.g., enable airplane mode or block the /cart endpoint) to simulate a network failure.",
      "5. Observe the UI: the button should remain in an error state (e.g., still says ‘Add to cart’ or shows an error toast).",
      "6. Re-enable the network and click the button again; confirm the button text changes to ‘Remove’ and the cart badge increments to 1.",
      "7. Click the shopping-cart icon (shopping_cart_container) to navigate to the checkout page.",
      "8. On the checkout page, verify that the item price is NOT $29.99 (negative assertion).",
      "9. Remove the item from the cart and immediately click the browser back button to simulate a navigation edge case.",
      "10. Return to the inventory page and confirm the ‘Add to cart’ button is reset and clickable.",
      "11. Add the first item again, then open DevTools → Application → Local Storage and delete the cart key to simulate data-loss.",
      "12. Refresh the page and confirm the cart is empty (badge = 0).",
      "13. Attempt to add a non-existent item (e.g., via malformed selector) and confirm Playwright throws an element-not-found exception.",
      "14. Finally, add the first item once more, navigate to checkout, and assert that the price is still NOT $29.99."
    ]
  }
]
[
  {
    "number": 1,
    "title": "Test Login Successful",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/1",
    "utilsCode": "export async function login(page, username, password) {\n  await page.fill('[data-test=\"username\"]', username);\n  await page.fill('[data-test=\"password\"]', password);\n  await page.click('[data-test=\"login-button\"]');\n}\n\nexport async function getErrorMessage(page) {\n  return await page.textContent('[data-test=\"error\"]');\n}\n\nexport async function clearInputs(page) {\n  await page.fill('[data-test=\"username\"]', '');\n  await page.fill('[data-test=\"password\"]', '');\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { login } from './utils.js';\n\ntest.describe('Login Negative & Edge Cases', () => {\n  const baseURL = 'https://www.saucedemo.com';\n  const inventoryURL = `${baseURL}/inventory.html`;\n\n  test.beforeEach(async ({ page }) => {\n    await page.goto(baseURL);\n  });\n\n  test('Empty username shows required error', async ({ page }) => {\n    await login(page, '', '');\n    await expect(page.locator('[data-test=\"error\"]')).toContainText('Username is required');\n    expect(page.url()).toBe(baseURL + '/');\n  });\n\n  test('Empty password shows required error', async ({ page }) => {\n    await login(page, 'standard_user', '');\n    await expect(page.locator('[data-test=\"error\"]')).toContainText('Password is required');\n    expect(page.url()).toBe(baseURL + '/');\n  });\n\n  test('Invalid credentials show mismatch error', async ({ page }) => {\n    await login(page, 'bad_user', 'wrong123');\n    await expect(page.locator('[data-test=\"error\"]')).toContainText('do not match any user');\n    expect(page.url()).toBe(baseURL + '/');\n  });\n\n  test('Locked-out user shows lockout error', async ({ page }) => {\n    await login(page, 'locked_out_user', 'secret_sauce');\n    await expect(page.locator('[data-test=\"error\"]')).toContainText('user has been locked out');\n    expect(page.url()).toBe(baseURL + '/');\n  });\n\n  test('Username with leading spaces fails', async ({ page }) => {\n    await login(page, ' standard_user', 'secret_sauce');\n    await expect(page.locator('[data-test=\"error\"]')).toContainText('do not match any user');\n    expect(page.url()).toBe(baseURL + '/');\n  });\n\n  test('Password with trailing spaces fails', async ({ page }) => {\n    await login(page, 'standard_user', 'secret_sauce ');\n    await expect(page.locator('[data-test=\"error\"]')).toContainText('do not match any user');\n    expect(page.url()).toBe(baseURL + '/');\n  });\n\n  test('SQL injection attempt fails gracefully', async ({ page }) => {\n    await login(page, \"') OR 1=1--\", 'whatever');\n    await expect(page.locator('[data-test=\"error\"]')).toContainText('do not match any user');\n    expect(page.url()).toBe(baseURL + '/');\n  });\n\n  test('XSS payload in username is sanitized', async ({ page }) => {\n    await login(page, '<script>alert(1)</script>', 'whatever');\n    await expect(page.locator('[data-test=\"error\"]')).toContainText('do not match any user');\n    const hasAlert = await page.evaluate(() => window.alert.toString().includes('native'));\n    expect(hasAlert).toBeTruthy(); // alert not overridden\n    expect(page.url()).toBe(baseURL + '/');\n  });\n\n  test('Offline network blocks navigation', async ({ page, context }) => {\n    await context.setOffline(true);\n    await login(page, 'standard_user', 'secret_sauce');\n    await page.waitForTimeout(1000);\n    expect(page.url()).toBe(baseURL + '/');\n    await context.setOffline(false);\n  });\n\n  test('Rapid double click sends only one request', async ({ page }) => {\n    await page.fill('[data-test=\"username\"]', 'standard_user');\n    await page.fill('[data-test=\"password\"]', 'secret_sauce');\n    await page.dblclick('[data-test=\"login-button\"]');\n    await page.waitForURL(inventoryURL);\n    expect(page.url()).toBe(inventoryURL);\n  });\n\n  test('Enter key with invalid creds stays on page', async ({ page }) => {\n    await page.fill('[data-test=\"username\"]', 'bad');\n    await page.fill('[data-test=\"password\"]', 'bad');\n    await page.press('[data-test=\"password\"]', 'Enter');\n    await expect(page.locator('[data-test=\"error\"]')).toContainText('do not match any user');\n    expect(page.url()).toBe(baseURL + '/');\n  });\n});",
    "manualSteps": [
      "1. Navigate to https://www.saucedemo.com/",
      "2. Leave the Username field empty and click Login → verify error message “Epic sadface: Username is required” appears.",
      "3. Refresh the page, enter a valid username (standard_user) but leave Password empty and click Login → verify error message “Epic sadface: Password is required” appears.",
      "4. Refresh the page, enter an invalid username (e.g. bad_user) and invalid password (e.g. wrong123) → click Login → verify error message “Epic sadface: Username and password do not match any user in this service” appears.",
      "5. Refresh the page, enter a locked-out username (locked_out_user) and correct password (secret_sauce) → click Login → verify error message “Epic sadface: Sorry, this user has been locked out.” appears.",
      "6. Refresh the page, enter username with leading spaces ( standard_user) and correct password → click Login → verify same invalid-credentials error as step 4.",
      "7. Refresh the page, enter username with trailing spaces (standard_user ) and correct password → click Login → verify same invalid-credentials error.",
      "8. Refresh the page, enter correct username but password with trailing spaces (secret_sauce ) → click Login → verify same invalid-credentials error.",
      "9. Refresh the page, enter SQL injection string (') OR 1=1-- and any password → click Login → verify same invalid-credentials error.",
      "10. Refresh the page, enter XSS payload (<script>alert(1)</script>) in username and any password → click Login → verify same invalid-credentials error and that script is not executed.",
      "11. Refresh the page, open DevTools → Network → throttle network to offline → enter valid credentials → click Login → verify error message or UI stays on login page without navigation.",
      "12. Refresh the page, enter valid credentials → click Login → immediately double-click Login rapidly → verify only one request is sent and app navigates to /inventory.html without crashing.",
      "13. Refresh the page, enter valid credentials → press Enter instead of clicking Login → verify navigation to /inventory.html (negative path: if Enter fails, stays on page and shows error)."
    ]
  },
  {
    "number": 1,
    "scenario": "positive",
    "title": "Test Login Successful",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/1",
    "filename": "login_with_standard_user_should_succeed.spec.js",
    "utilsCode": "export async function login(page, username, password) {\n  await page.fill('[data-test=\"username\"]', username);\n  await page.fill('[data-test=\"password\"]', password);\n  await page.click('[data-test=\"login-button\"]');\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { login } from './utils.js';\n\ntest('Login with standard_user should succeed', async ({ page }) => {\n  await page.goto('https://www.saucedemo.com/');\n  await expect(page).toHaveTitle(/Swag Labs/);\n\n  await login(page, 'standard_user', 'secret_sauce');\n\n  await expect(page).toHaveURL('https://www.saucedemo.com/inventory.html');\n  await expect(page.locator('[data-test=\"title\"]')).toHaveText('Products');\n});",
    "manualSteps": [
      "Navigate to https://www.saucedemo.com/",
      "Verify the page title is 'Swag Labs'",
      "Locate the Username input field with placeholder 'Username'",
      "Enter the text 'standard_user' into the Username field",
      "Locate the Password input field with placeholder 'Password'",
      "Enter the text 'secret_sauce' into the Password field",
      "Click the 'Login' button",
      "Wait for the URL to change to https://www.saucedemo.com/inventory.html",
      "Verify the current page URL is https://www.saucedemo.com/inventory.html",
      "Verify the page now displays the text 'Products' in the header"
    ]
  },
  {
    "number": 1,
    "scenario": "negative",
    "title": "Test Login Successful",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/1",
    "filename": "test_login_successful_negative.spec.js",
    "utilsCode": "export async function fillInput(page, selector, value) {\n  await page.fill(selector, value);\n}\n\nexport async function clickButton(page, selector) {\n  await page.click(selector);\n}\n\nexport async function getErrorMessage(page) {\n  const error = await page.locator('[data-test=\"error\"]').textContent();\n  return error?.trim();\n}\n\nexport async function isOnPage(page, url) {\n  return page.url() === url;\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { fillInput, clickButton, getErrorMessage, isOnPage } from './utils.js';\n\ntest.describe('Login - Negative Path', () => {\n  test('should NOT reach inventory page with invalid credentials', async ({ page }) => {\n    await page.goto('https://www.saucedemo.com/');\n    await expect(page).toHaveTitle(/Swag Labs/);\n\n    await fillInput(page, 'input[placeholder=\"Username\"]', 'standard_user');\n    await fillInput(page, 'input[placeholder=\"Password\"]', 'secret_sauce');\n    await clickButton(page, 'input[type=\"submit\"]');\n\n    // Negative assertions\n    const reachedInventory = await isOnPage(page, 'https://www.saucedemo.com/inventory.html');\n    expect(reachedInventory).toBe(false);\n\n    const errorText = await getErrorMessage(page);\n    expect(errorText).toBeTruthy();\n\n    await page.screenshot({ path: 'negative-login-fail.png' });\n  });\n});",
    "manualSteps": [
      "Navigate to https://www.saucedemo.com/",
      "Verify the page title is 'Swag Labs'",
      "Locate the Username input field with placeholder 'Username'",
      "Enter the text 'standard_user' into the Username field",
      "Locate the Password input field with placeholder 'Password'",
      "Enter the text 'secret_sauce' into the Password field",
      "Click the 'Login' button",
      "Verify that the browser URL is NOT https://www.saucedemo.com/inventory.html (negative assertion)",
      "Verify that an error message element is present on the page",
      "Capture the error message text and confirm it is not empty",
      "Take a screenshot of the failed login attempt for evidence"
    ]
  },
  {
    "number": 2,
    "scenario": "positive",
    "title": "Test User Locked",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/2",
    "filename": "test_user_locked_positive.spec.js",
    "utilsCode": "export async function loginWithCredentials(page, username, password) {\n  await page.fill('input[placeholder=\"Username\"]', username);\n  await page.fill('input[placeholder=\"Password\"]', password);\n  await page.click('input[type=\"submit\"]');\n}\n\nexport async function getErrorMessage(page) {\n  const errorLocator = page.locator('[data-test=\"error\"]');\n  await errorLocator.waitFor({ state: 'visible' });\n  return errorLocator.textContent();\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { loginWithCredentials, getErrorMessage } from './utils.js';\n\ntest('Locked-out user sees correct error message', async ({ page }) => {\n  await page.goto('https://www.saucedemo.com/');\n  await loginWithCredentials(page, 'locked_out_user', 'secret_sauce');\n  const message = await getErrorMessage(page);\n  expect(message).toBe('Epic sadface: Sorry, this user has been locked out.');\n});",
    "manualSteps": [
      "Navigate to https://www.saucedemo.com/",
      "Wait until the login form is fully rendered",
      "Locate the Username input field by its placeholder text 'Username'",
      "Enter the exact text locked_out_user into the Username field",
      "Locate the Password input field by its placeholder text 'Password'",
      "Enter the exact text secret_sauce into the Password field",
      "Locate the Login button",
      "Click the Login button",
      "Wait for the error container to appear",
      "Assert that the error container is visible",
      "Assert that the error text is exactly Epic sadface: Sorry, this user has been locked out.",
      "Take a screenshot of the error for evidence (optional but recommended)",
      "Mark the test as passed if all assertions are true"
    ]
  },
  {
    "number": 5,
    "title": "Check first item",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/5",
    "utilsCode": "export async function login(page, username, password) {\n  await page.fill('[data-test=\"username\"]', username);\n  await page.fill('[data-test=\"password\"]', password);\n  await page.click('[data-test=\"login-button\"]');\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { login } from './utils.js';\n\n\ntest.describe(\"Check first item title and price after successful login\", () => {\n  test('Check first item title and price after successful login', async ({ page }) => {\n    await page.goto('https://www.saucedemo.com/');\n    await login(page, 'standard_user', 'secret_sauce');\n    await expect(page).toHaveURL('https://www.saucedemo.com/inventory.html');\n  \n    const firstItem = page.locator('.inventory_item').first();\n    await expect(firstItem).toBeVisible();\n  \n    const itemTitle = firstItem.locator('.inventory_item_name');\n    await expect(itemTitle).toHaveText('Sauce Labs Backpack');\n  \n    const itemPrice = firstItem.locator('.inventory_item_price');\n    await expect(itemPrice).toHaveText('$69.99');\n  });\n});",
    "manualSteps": [
      "1. Open the browser and navigate to https://www.saucedemo.com/",
      "2. Wait for the login page to load completely",
      "3. Locate the Username input field with placeholder 'Username'",
      "4. Enter the text 'standard_user' into the Username field",
      "5. Locate the Password input field with placeholder 'Password'",
      "6. Enter the text 'secret_sauce' into the Password field",
      "7. Locate and click the 'Login' button",
      "8. Wait for the URL to change to https://www.saucedemo.com/inventory.html",
      "9. Verify that the inventory page has loaded by checking for visibility of the inventory list",
      "10. Locate the first item in the inventory list",
      "11. Within the first item card, locate the item title element",
      "12. Verify that the item title text is exactly 'Sauce Labs Backpack'",
      "13. Within the first item card, locate the item price element",
      "14. Verify that the item price text is exactly '$69.99'"
    ]
  }
]
[
  {
    "number": 1,
    "title": "Test Login Successful",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/1",
    "utilsCode": "export async function fillLoginForm(page, username, password) {\n  await page.fill('#user-name', username);\n  await page.fill('#password', password);\n}\n\nexport async function login(page, username, password) {\n  await fillLoginForm(page, username, password);\n  await page.click('#login-button');\n}\n\nexport async function getErrorMessage(page) {\n  return await page.textContent('[data-test=\"error\"]');\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { login, getErrorMessage, fillLoginForm } from './utils.js';\n\ntest.describe('Login negative paths & edge cases', () => {\n  test.beforeEach(async ({ page }) => {\n    await page.goto('https://www.saucedemo.com/');\n  });\n\n  test('Empty username shows required error', async ({ page }) => {\n    await login(page, '', '');\n    await expect(page.locator('[data-test=\"error\"]')).toContainText('Username is required');\n  });\n\n  test('Empty password shows required error', async ({ page }) => {\n    await login(page, 'standard_user', '');\n    await expect(page.locator('[data-test=\"error\"]')).toContainText('Password is required');\n  });\n\n  test('Invalid credentials show mismatch error', async ({ page }) => {\n    await login(page, 'bad_user', 'wrong123');\n    await expect(page.locator('[data-test=\"error\"]')).toContainText(\n      'Username and password do not match any user in this service'\n    );\n  });\n\n  test('Locked-out user shows lockout error', async ({ page }) => {\n    await login(page, 'locked_out_user', 'secret_sauce');\n    await expect(page.locator('[data-test=\"error\"]')).toContainText('Sorry, this user has been locked out.');\n  });\n\n  test('Username with leading spaces fails', async ({ page }) => {\n    await login(page, ' standard_user', 'secret_sauce');\n    await expect(page.locator('[data-test=\"error\"]')).toContainText('do not match');\n  });\n\n  test('Password with leading spaces fails', async ({ page }) => {\n    await login(page, 'standard_user', ' secret_sauce');\n    await expect(page.locator('[data-test=\"error\"]')).toContainText('do not match');\n  });\n\n  test('Long username input handled', async ({ page }) => {\n    const longStr = 'a'.repeat(256);\n    await fillLoginForm(page, longStr, 'secret_sauce');\n    const usernameValue = await page.inputValue('#user-name');\n    expect(usernameValue.length).toBeLessThanOrEqual(255);\n  });\n\n  test('Long password input handled', async ({ page }) => {\n    const longStr = 'b'.repeat(256);\n    await fillLoginForm(page, 'standard_user', longStr);\n    await page.click('#login-button');\n    await expect(page.locator('[data-test=\"error\"]')).toBeVisible();\n  });\n\n  test('Offline network shows error', async ({ page, context }) => {\n    await context.setOffline(true);\n    await login(page, 'standard_user', 'secret_sauce');\n    // Browser offline banner appears; Playwright will throw on navigation\n    await expect(page).not.toHaveURL(/inventory.html/);\n    await context.setOffline(false);\n  });\n\n  test('Double-click login sends only one request', async ({ page }) => {\n    let requestCount = 0;\n    await page.route('**/login', (route) => {\n      requestCount++;\n      return route.continue();\n    });\n    await fillLoginForm(page, 'standard_user', 'secret_sauce');\n    await page.dblclick('#login-button');\n    await page.waitForURL(/inventory.html/);\n    expect(requestCount).toBe(1);\n  });\n\n  test('Enter key in password field submits', async ({ page }) => {\n    await fillLoginForm(page, 'standard_user', 'secret_sauce');\n    await page.press('#password', 'Enter');\n    await expect(page).toHaveURL(/inventory.html/);\n  });\n\n  test('500 response shows generic error', async ({ page }) => {\n    await page.route('**/login', (route) =>\n      route.fulfill({ status: 500, body: 'Internal Server Error' })\n    );\n    await login(page, 'standard_user', 'secret_sauce');\n    await expect(page.locator('[data-test=\"error\"]')).toContainText('Sorry');\n  });\n\n  test('Missing location header prevents redirect', async ({ page }) => {\n    await page.route('**/login', async (route) => {\n      const response = await route.fetch();\n      await route.fulfill({\n        status: 200,\n        headers: { ...response.headers(), location: '' },\n        body: response.body(),\n      });\n    });\n    await login(page, 'standard_user', 'secret_sauce');\n    await expect(page).not.toHaveURL(/inventory.html/);\n  });\n});",
    "manualSteps": [
      "1. Navigate to https://www.saucedemo.com/",
      "2. Leave the Username field empty and click Login → verify error message “Epic sadface: Username is required” appears.",
      "3. Refresh the page, enter a valid username (standard_user) but leave Password empty and click Login → verify error message “Epic sadface: Password is required” appears.",
      "4. Refresh the page, enter an invalid username (e.g. bad_user) and invalid password (e.g. wrong123) → click Login → verify error message “Epic sadface: Username and password do not match any user in this service” appears.",
      "5. Refresh the page, enter a locked-out username (locked_out_user) and correct password (secret_sauce) → click Login → verify error message “Epic sadface: Sorry, this user has been locked out.” appears.",
      "6. Refresh the page, enter username with leading spaces ( standard_user) and correct password → click Login → verify same invalid-credentials error as step 4.",
      "7. Refresh the page, enter correct username and password with leading spaces ( secret_sauce) → click Login → verify same invalid-credentials error.",
      "8. Refresh the page, paste a 256-character random string into Username → verify field truncates or displays appropriate validation.",
      "9. Refresh the page, paste a 256-character random string into Password → verify field masks input and shows validation error after Login click.",
      "10. Refresh the page, open DevTools → Network tab → throttle network to offline → click Login → verify browser shows native offline message or app shows network error.",
      "11. Refresh the page, enter valid credentials and double-click Login button rapidly → verify only one login request is sent and inventory page loads once.",
      "12. Refresh the page, enter valid credentials → press Enter in Password field instead of clicking Login → verify login occurs successfully (negative path confirmation that Enter key is not broken).",
      "13. Refresh the page, enter valid credentials → disable JavaScript in DevTools → click Login → verify user is not redirected and login fails gracefully.",
      "14. Refresh the page, enter valid credentials → intercept login POST and return 500 status → verify app displays generic error message.",
      "15. Refresh the page, enter valid credentials → intercept response and modify location header to empty → verify app does not redirect to inventory.html."
    ]
  },
  {
    "number": 1,
    "scenario": "positive",
    "title": "Test Login Successful",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/1",
    "filename": "test_login_successful.spec.js",
    "utilsCode": "export async function fillText(page, selector, text) {\n  await page.fill(selector, text);\n}\n\nexport async function clickElement(page, selector) {\n  await page.click(selector);\n}\n\nexport async function assertUrl(page, expectedUrl) {\n  await page.waitForURL(expectedUrl);\n}\n\nexport async function assertText(page, selector, expectedText) {\n  await page.waitForSelector(selector);\n  const text = await page.textContent(selector);\n  if (!text.includes(expectedText)) {\n    throw new Error(`Expected text \"${expectedText}\" not found in \"${text}\"`);\n  }\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { fillText, clickElement, assertUrl, assertText } from '../utils.js';\n\ntest('Test Login Successful', async ({ page }) => {\n  await page.goto('https://www.saucedemo.com');\n  await expect(page).toHaveTitle(/Swag Labs/);\n  \n  await fillText(page, 'input[placeholder=\"Username\"]', 'standard_user');\n  await fillText(page, 'input[placeholder=\"Password\"]', 'secret_sauce');\n  await clickElement(page, 'input[type=\"submit\"]');\n  \n  await assertUrl(page, 'https://www.saucedemo.com/inventory.html');\n  await assertText(page, 'span.title', 'Products');\n});",
    "manualSteps": [
      "Navigate to https://www.saucedemo.com",
      "Verify the page title contains 'Swag Labs'",
      "Locate the Username input field with placeholder 'Username'",
      "Enter the text 'standard_user' into the Username field",
      "Locate the Password input field with placeholder 'Password'",
      "Enter the text 'secret_sauce' into the Password field",
      "Click the Login button",
      "Wait for the URL to change to https://www.saucedemo.com/inventory.html",
      "Verify the current URL is https://www.saucedemo.com/inventory.html",
      "Verify the page contains the text 'Products' in the header"
    ]
  },
  {
    "number": 1,
    "scenario": "negative",
    "title": "Test Login Successful",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/1",
    "filename": "test_login_successful_negative.spec.js",
    "utilsCode": "export async function fillInput(page, selector, value) {\n  await page.fill(selector, value);\n}\n\nexport async function clickButton(page, selector) {\n  await page.click(selector);\n}\n\nexport async function getErrorMessage(page) {\n  const error = await page.locator('[data-test=\"error\"]').textContent();\n  return error?.trim();\n}\n\nexport async function isOnPage(page, url) {\n  return page.url() === url;\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { fillInput, clickButton, getErrorMessage, isOnPage } from './utils.js';\n\ntest.describe('Login - Negative Path', () => {\n  test('should NOT reach inventory page with invalid credentials', async ({ page }) => {\n    await page.goto('https://www.saucedemo.com/');\n    await expect(page).toHaveTitle(/Swag Labs/);\n\n    await fillInput(page, 'input[placeholder=\"Username\"]', 'standard_user');\n    await fillInput(page, 'input[placeholder=\"Password\"]', 'secret_sauce');\n    await clickButton(page, 'input[type=\"submit\"]');\n\n    // Negative assertions\n    const reachedInventory = await isOnPage(page, 'https://www.saucedemo.com/inventory.html');\n    expect(reachedInventory).toBe(false);\n\n    const errorText = await getErrorMessage(page);\n    expect(errorText).toBeTruthy();\n\n    await page.screenshot({ path: 'negative-login-fail.png' });\n  });\n});",
    "manualSteps": [
      "Navigate to https://www.saucedemo.com/",
      "Verify the page title is 'Swag Labs'",
      "Locate the Username input field with placeholder 'Username'",
      "Enter the text 'standard_user' into the Username field",
      "Locate the Password input field with placeholder 'Password'",
      "Enter the text 'secret_sauce' into the Password field",
      "Click the 'Login' button",
      "Verify that the browser URL is NOT https://www.saucedemo.com/inventory.html (negative assertion)",
      "Verify that an error message element is present on the page",
      "Capture the error message text and confirm it is not empty",
      "Take a screenshot of the failed login attempt for evidence"
    ]
  },
  {
    "number": 2,
    "scenario": "positive",
    "title": "Test User Locked",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/2",
    "filename": "test_user_locked_positive.spec.js",
    "utilsCode": "export async function loginWithCredentials(page, username, password) {\n  await page.fill('input[placeholder=\"Username\"]', username);\n  await page.fill('input[placeholder=\"Password\"]', password);\n  await page.click('input[type=\"submit\"]');\n}\n\nexport async function getErrorMessage(page) {\n  const errorLocator = page.locator('[data-test=\"error\"]');\n  await errorLocator.waitFor({ state: 'visible' });\n  return errorLocator.textContent();\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { loginWithCredentials, getErrorMessage } from './utils.js';\n\ntest('Locked-out user sees correct error message', async ({ page }) => {\n  await page.goto('https://www.saucedemo.com/');\n  await loginWithCredentials(page, 'locked_out_user', 'secret_sauce');\n  const message = await getErrorMessage(page);\n  expect(message).toBe('Epic sadface: Sorry, this user has been locked out.');\n});",
    "manualSteps": [
      "Navigate to https://www.saucedemo.com/",
      "Wait until the login form is fully rendered",
      "Locate the Username input field by its placeholder text 'Username'",
      "Enter the exact text locked_out_user into the Username field",
      "Locate the Password input field by its placeholder text 'Password'",
      "Enter the exact text secret_sauce into the Password field",
      "Locate the Login button",
      "Click the Login button",
      "Wait for the error container to appear",
      "Assert that the error container is visible",
      "Assert that the error text is exactly Epic sadface: Sorry, this user has been locked out.",
      "Take a screenshot of the error for evidence (optional but recommended)",
      "Mark the test as passed if all assertions are true"
    ]
  },
  {
    "number": 6,
    "title": "Add the item to the checkout",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/6",
    "utilsCode": "/**\n * Adds the first inventory item to the cart.\n * @param {import('@playwright/test').Page} page\n */\nexport async function addFirstItemToCart(page) {\n  const addButton = page.locator('.inventory_item').first().locator('button:has-text(\"Add to cart\")');\n  await addButton.click();\n  await expect(addButton).toHaveText('Remove');\n}\n\n/**\n * Clicks the shopping-cart icon to navigate to the cart page.\n * @param {import('@playwright/test').Page} page\n */\nexport async function goToCart(page) {\n  await page.click('.shopping_cart_container');\n  await expect(page).toHaveURL(/.*cart.html/);\n}\n\n/**\n * Returns the displayed price text for the nth cart item (0-based index).\n * @param {import('@playwright/test').Page} page\n * @param {number} index\n * @returns {Promise<string>}\n */\nexport async function getCartItemPrice(page, index = 0) {\n  return page.locator('.cart_item').nth(index).locator('.inventory_item_price').textContent();\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { addFirstItemToCart, goToCart, getCartItemPrice } from './utils.js';\n\ntest.describe('Add first item to checkout', () => {\n  test('should add the first item and validate $29.99 in cart', async ({ page }) => {\n    await page.goto('/inventory.html');\n\n    // Add the first item to the cart\n    await addFirstItemToCart(page);\n\n    // Navigate to cart\n    await goToCart(page);\n\n    // Validate price\n    const price = await getCartItemPrice(page, 0);\n    expect(price).toBe('$29.99');\n  });\n});",
    "manualSteps": [
      "1. Navigate to the inventory page (URL containing /inventory.html).",
      "2. Verify that at least one inventory item is displayed.",
      "3. Locate the first inventory item card.",
      "4. Within the first item card, identify the ‘Add to cart’ button (text equals ‘Add to cart’).",
      "5. Click the ‘Add to cart’ button.",
      "6. Verify that the button text changes to ‘Remove’ (indicating the item was added).",
      "7. Locate the shopping-cart icon (class shopping_cart_container) in the header.",
      "8. Click the shopping-cart icon.",
      "9. Verify that the browser navigates to the cart page (URL containing /cart.html).",
      "10. Verify that exactly one item is listed in the cart.",
      "11. Within the cart item, verify that the item price is displayed as $29.99."
    ]
  },
  {
    "number": 5,
    "title": "Check first item",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/5",
    "utilsCode": "export async function login(page, username, password) {\n  await page.fill('input[placeholder=\"Username\"]', username);\n  await page.fill('input[placeholder=\"Password\"]', password);\n  await page.click('input[type=\"submit\"]');\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { login } from './utils.js';\n\n\ntest.describe(\"Check first item title and price after successful login\", () => {\n  test('Check first item title and price after successful login', async ({ page }) => {\n    await page.goto('https://www.saucedemo.com/');\n    await login(page, 'standard_user', 'secret_sauce');\n    await expect(page).toHaveURL('https://www.saucedemo.com/inventory.html');\n  \n    const firstItem = page.locator('.inventory_item').first();\n    await expect(firstItem.locator('.inventory_item_name')).toHaveText('Sauce Labs Backpack');\n    await expect(firstItem.locator('.inventory_item_price')).toHaveText('$69.99');\n  });\n});",
    "manualSteps": [
      "1. Open the browser and navigate to https://www.saucedemo.com/",
      "2. Wait for the login page to load completely",
      "3. Locate the Username input field with placeholder 'Username'",
      "4. Enter the text 'standard_user' into the Username field",
      "5. Locate the Password input field with placeholder 'Password'",
      "6. Enter the text 'secret_sauce' into the Password field",
      "7. Locate and click the 'Login' button",
      "8. Wait for the URL to change to https://www.saucedemo.com/inventory.html",
      "9. Verify that the inventory page has loaded and items are visible",
      "10. Locate the first item card in the inventory list",
      "11. Within the first item card, find the item title element",
      "12. Verify that the item title text is exactly 'Sauce Labs Backpack'",
      "13. Within the same first item card, find the item price element",
      "14. Verify that the item price text is exactly '$69.99'"
    ]
  }
]
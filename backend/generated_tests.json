[
  {
    "number": 1,
    "title": "Test Login Successful",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/1",
    "utilsCode": "export async function login(page, username, password) {\n  await page.fill('[data-test=\"username\"]', username);\n  await page.fill('[data-test=\"password\"]', password);\n  await page.click('[data-test=\"login-button\"]');\n}\n\nexport async function clearInput(page, selector) {\n  await page.click(selector, { clickCount: 3 });\n  await page.press(selector, 'Backspace');\n}\n\nexport async function waitForError(page) {\n  await page.waitForSelector('[data-test=\"error\"]', { state: 'visible' });\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { login } from './utils.js';\n\ntest.describe('Login negative paths', () => {\n  test.beforeEach(async ({ page }) => {\n    await page.goto('https://www.saucedemo.com/');\n  });\n\n  test('Empty username shows error', async ({ page }) => {\n    await login(page, '', 'secret_sauce');\n    await expect(page.locator('[data-test=\"error\"]')).toContainText('Username is required');\n  });\n\n  test('Empty password shows error', async ({ page }) => {\n    await login(page, 'standard_user', '');\n    await expect(page.locator('[data-test=\"error\"]')).toContainText('Password is required');\n  });\n\n  test('Locked user shows error', async ({ page }) => {\n    await login(page, 'locked_out_user', 'secret_sauce');\n    await expect(page.locator('[data-test=\"error\"]')).toContainText('Sorry, this user has been locked out');\n  });\n\n  test('Invalid credentials show error', async ({ page }) => {\n    await login(page, 'fake_user', 'secret_sauce');\n    await expect(page.locator('[data-test=\"error\"]')).toContainText('Username and password do not match');\n  });\n\n  test('SQL injection attempt fails safely', async ({ page }) => {\n    const payload = \"admin' OR '1'='1\";\n    await login(page, payload, payload);\n    await expect(page.locator('[data-test=\"error\"]')).toContainText('Username and password do not match');\n  });\n\n  test('XSS payload is escaped', async ({ page }) => {\n    const xss = '<script>alert(1)</script>';\n    await login(page, xss, 'secret_sauce');\n    await expect(page.locator('[data-test=\"error\"]')).toContainText('Username and password do not match');\n    const text = await page.textContent('body');\n    expect(text).not.toContain('<script>');\n  });\n\n  test('Long username handled gracefully', async ({ page }) => {\n    const long = 'a'.repeat(1000);\n    await login(page, long, 'secret_sauce');\n    await expect(page.locator('[data-test=\"error\"]')).toContainText('Username and password do not match');\n  });\n\n  test('Enter key with invalid creds shows error', async ({ page }) => {\n    await page.fill('[data-test=\"username\"]', 'invalid');\n    await page.fill('[data-test=\"password\"]', 'invalid');\n    await page.press('[data-test=\"password\"]', 'Enter');\n    await expect(page.locator('[data-test=\"error\"]')).toContainText('Username and password do not match');\n  });\n\n  test('Offline mode shows error', async ({ page, context }) => {\n    await context.setOffline(true);\n    await login(page, 'standard_user', 'secret_sauce');\n    await expect(page.locator('[data-test=\"error\"]')).toContainText('Username and password do not match');\n  });\n});",
    "manualSteps": [
      "1. Navigate to https://www.saucedemo.com/",
      "2. Leave the Username field empty and click Login → verify error message “Epic sadface: Username is required” appears.",
      "3. Refresh the page, enter a valid username (standard_user) but leave Password empty → click Login → verify error message “Epic sadface: Password is required” appears.",
      "4. Refresh the page, enter an invalid username (e.g., locked_out_user) and valid password (secret_sauce) → click Login → verify error message “Epic sadface: Sorry, this user has been locked out.” appears.",
      "5. Refresh the page, enter a non-existing username (fake_user) and valid password → click Login → verify error message “Epic sadface: Username and password do not match any user in this service” appears.",
      "6. Refresh the page, enter valid username but incorrect password (wrong_password) → click Login → verify same error message as step 5 appears.",
      "7. Refresh the page, enter SQL injection string (e.g., admin' OR '1'='1) in both username and password fields → click Login → verify generic error message appears and no server crash.",
      "8. Refresh the page, enter XSS payload (<script>alert(1)</script>) in username → click Login → verify payload is escaped and no script executes.",
      "9. Refresh the page, enter 1000+ characters in username → click Login → verify UI remains stable and appropriate error message appears.",
      "10. Refresh the page, enter valid credentials but press Enter instead of clicking Login → verify login still fails if credentials are invalid.",
      "11. Disable JavaScript in browser → verify login button is non-functional or appropriate fallback message appears.",
      "12. Throttle network to offline → click Login → verify offline error or graceful message appears.",
      "13. Open dev tools, block the /auth endpoint → click Login → verify UI shows generic error and does not hang."
    ]
  },
  {
    "number": 1,
    "scenario": "positive",
    "title": "Test Login Successful",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/1",
    "filename": "test_login_successful.spec.js",
    "utilsCode": "export async function fillText(page, selector, text) {\n  await page.fill(selector, text);\n}\n\nexport async function clickElement(page, selector) {\n  await page.click(selector);\n}\n\nexport async function assertUrl(page, expectedUrl) {\n  await page.waitForURL(expectedUrl);\n}\n\nexport async function assertText(page, selector, expectedText) {\n  await page.waitForSelector(selector);\n  const text = await page.textContent(selector);\n  if (!text.includes(expectedText)) {\n    throw new Error(`Expected text \"${expectedText}\" not found in \"${text}\"`);\n  }\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { fillText, clickElement, assertUrl, assertText } from '../utils.js';\n\ntest('Test Login Successful', async ({ page }) => {\n  await page.goto('https://www.saucedemo.com');\n  await expect(page).toHaveTitle(/Swag Labs/);\n  \n  await fillText(page, 'input[placeholder=\"Username\"]', 'standard_user');\n  await fillText(page, 'input[placeholder=\"Password\"]', 'secret_sauce');\n  await clickElement(page, 'input[type=\"submit\"]');\n  \n  await assertUrl(page, 'https://www.saucedemo.com/inventory.html');\n  await assertText(page, 'span.title', 'Products');\n});",
    "manualSteps": [
      "Navigate to https://www.saucedemo.com",
      "Verify the page title contains 'Swag Labs'",
      "Locate the Username input field with placeholder 'Username'",
      "Enter the text 'standard_user' into the Username field",
      "Locate the Password input field with placeholder 'Password'",
      "Enter the text 'secret_sauce' into the Password field",
      "Click the Login button",
      "Wait for the URL to change to https://www.saucedemo.com/inventory.html",
      "Verify the current URL is https://www.saucedemo.com/inventory.html",
      "Verify the page contains the text 'Products' in the header"
    ]
  },
  {
    "number": 1,
    "scenario": "negative",
    "title": "Test Login Successful",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/1",
    "filename": "test_login_successful_negative.spec.js",
    "utilsCode": "export async function fillInput(page, selector, value) {\n  await page.fill(selector, value);\n}\n\nexport async function clickButton(page, selector) {\n  await page.click(selector);\n}\n\nexport async function getErrorMessage(page) {\n  const error = await page.locator('[data-test=\"error\"]').textContent();\n  return error?.trim();\n}\n\nexport async function isOnPage(page, url) {\n  return page.url() === url;\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { fillInput, clickButton, getErrorMessage, isOnPage } from './utils.js';\n\ntest.describe('Login - Negative Path', () => {\n  test('should NOT reach inventory page with invalid credentials', async ({ page }) => {\n    await page.goto('https://www.saucedemo.com/');\n    await expect(page).toHaveTitle(/Swag Labs/);\n\n    await fillInput(page, 'input[placeholder=\"Username\"]', 'standard_user');\n    await fillInput(page, 'input[placeholder=\"Password\"]', 'secret_sauce');\n    await clickButton(page, 'input[type=\"submit\"]');\n\n    // Negative assertions\n    const reachedInventory = await isOnPage(page, 'https://www.saucedemo.com/inventory.html');\n    expect(reachedInventory).toBe(false);\n\n    const errorText = await getErrorMessage(page);\n    expect(errorText).toBeTruthy();\n\n    await page.screenshot({ path: 'negative-login-fail.png' });\n  });\n});",
    "manualSteps": [
      "Navigate to https://www.saucedemo.com/",
      "Verify the page title is 'Swag Labs'",
      "Locate the Username input field with placeholder 'Username'",
      "Enter the text 'standard_user' into the Username field",
      "Locate the Password input field with placeholder 'Password'",
      "Enter the text 'secret_sauce' into the Password field",
      "Click the 'Login' button",
      "Verify that the browser URL is NOT https://www.saucedemo.com/inventory.html (negative assertion)",
      "Verify that an error message element is present on the page",
      "Capture the error message text and confirm it is not empty",
      "Take a screenshot of the failed login attempt for evidence"
    ]
  },
  {
    "number": 2,
    "scenario": "positive",
    "title": "Test User Locked",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/2",
    "filename": "test_user_locked_positive.spec.js",
    "utilsCode": "export async function loginWithCredentials(page, username, password) {\n  await page.fill('input[placeholder=\"Username\"]', username);\n  await page.fill('input[placeholder=\"Password\"]', password);\n  await page.click('input[type=\"submit\"]');\n}\n\nexport async function getErrorMessage(page) {\n  const errorLocator = page.locator('[data-test=\"error\"]');\n  await errorLocator.waitFor({ state: 'visible' });\n  return errorLocator.textContent();\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { loginWithCredentials, getErrorMessage } from './utils.js';\n\ntest('Locked-out user sees correct error message', async ({ page }) => {\n  await page.goto('https://www.saucedemo.com/');\n  await loginWithCredentials(page, 'locked_out_user', 'secret_sauce');\n  const message = await getErrorMessage(page);\n  expect(message).toBe('Epic sadface: Sorry, this user has been locked out.');\n});",
    "manualSteps": [
      "Navigate to https://www.saucedemo.com/",
      "Wait until the login form is fully rendered",
      "Locate the Username input field by its placeholder text 'Username'",
      "Enter the exact text locked_out_user into the Username field",
      "Locate the Password input field by its placeholder text 'Password'",
      "Enter the exact text secret_sauce into the Password field",
      "Locate the Login button",
      "Click the Login button",
      "Wait for the error container to appear",
      "Assert that the error container is visible",
      "Assert that the error text is exactly Epic sadface: Sorry, this user has been locked out.",
      "Take a screenshot of the error for evidence (optional but recommended)",
      "Mark the test as passed if all assertions are true"
    ]
  },
  {
    "number": 6,
    "title": "Add the item to the checkout",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/6",
    "utilsCode": "/**\n * Adds the first inventory item to the cart.\n * @param {import('@playwright/test').Page} page\n */\nexport async function addFirstItemToCart(page) {\n  const addButton = page.locator('.inventory_item').first().locator('button:has-text(\"Add to cart\")');\n  await addButton.click();\n  await expect(addButton).toHaveText('Remove');\n}\n\n/**\n * Clicks the shopping-cart icon to navigate to the cart page.\n * @param {import('@playwright/test').Page} page\n */\nexport async function goToCart(page) {\n  await page.click('.shopping_cart_container');\n  await expect(page).toHaveURL(/.*cart.html/);\n}\n\n/**\n * Returns the displayed price text for the nth cart item (0-based index).\n * @param {import('@playwright/test').Page} page\n * @param {number} index\n * @returns {Promise<string>}\n */\nexport async function getCartItemPrice(page, index = 0) {\n  return page.locator('.cart_item').nth(index).locator('.inventory_item_price').textContent();\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { addFirstItemToCart, goToCart, getCartItemPrice } from './utils.js';\n\ntest.describe('Add first item to checkout', () => {\n  test('should add the first item and validate $29.99 in cart', async ({ page }) => {\n    await page.goto('/inventory.html');\n\n    // Add the first item to the cart\n    await addFirstItemToCart(page);\n\n    // Navigate to cart\n    await goToCart(page);\n\n    // Validate price\n    const price = await getCartItemPrice(page, 0);\n    expect(price).toBe('$29.99');\n  });\n});",
    "manualSteps": [
      "1. Navigate to the inventory page (URL containing /inventory.html).",
      "2. Verify that at least one inventory item is displayed.",
      "3. Locate the first inventory item card.",
      "4. Within the first item card, identify the ‘Add to cart’ button (text equals ‘Add to cart’).",
      "5. Click the ‘Add to cart’ button.",
      "6. Verify that the button text changes to ‘Remove’ (indicating the item was added).",
      "7. Locate the shopping-cart icon (class shopping_cart_container) in the header.",
      "8. Click the shopping-cart icon.",
      "9. Verify that the browser navigates to the cart page (URL containing /cart.html).",
      "10. Verify that exactly one item is listed in the cart.",
      "11. Within the cart item, verify that the item price is displayed as $29.99."
    ]
  },
  {
    "number": 5,
    "title": "Check first item",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/5",
    "utilsCode": "export async function login(page, username, password) {\n  await page.goto('https://www.saucedemo.com/');\n  await page.fill('[data-test=\"username\"]', username);\n  await page.fill('[data-test=\"password\"]', password);\n  await page.click('[data-test=\"login-button\"]');\n  await page.waitForURL(/.*inventory.html/);\n}\n\nexport async function ensureLoggedOut(page) {\n  await page.goto('https://www.saucedemo.com/');\n  if (await page.locator('#react-burger-menu-btn').isVisible()) {\n    await page.click('#react-burger-menu-btn');\n    await page.click('[data-test=\"logout-sidebar-link\"]');\n  }\n}\n\nexport async function mockFirstItemTitle(page, newTitle) {\n  await page.evaluate((text) => {\n    const first = document.querySelector('.inventory_item .inventory_item_name');\n    if (first) first.innerText = text;\n  }, newTitle);\n}\n\nexport async function mockFirstItemPrice(page, newPrice) {\n  await page.evaluate((text) => {\n    const first = document.querySelector('.inventory_item .inventory_item_price');\n    if (first) first.innerText = text;\n  }, newPrice);\n}\n\nexport async function blockInventoryApi(page) {\n  await page.route('**/inventory.html', (route) => route.abort('internalservererror'));\n}\n\nexport async function hideFirstItem(page) {\n  await page.addStyleTag({ content: '.inventory_item:first-child { display:none !important; }' });\n}\n\nexport async function removeFirstItem(page) {\n  await page.evaluate(() => {\n    const first = document.querySelector('.inventory_item');\n    if (first) first.remove();\n  });\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { login, ensureLoggedOut, mockFirstItemTitle, mockFirstItemPrice, blockInventoryApi, hideFirstItem, removeFirstItem } from './utils.js';\n\ntest.describe('Negative scenarios for first item validation @negative', () => {\n  test.beforeEach(async ({ page }) => {\n    await ensureLoggedOut(page);\n  });\n\n  test('should not show inventory when logged in with invalid credentials', async ({ page }) => {\n    await page.goto('https://www.saucedemo.com/');\n    await page.fill('[data-test=\"username\"]', 'invalid_user');\n    await page.fill('[data-test=\"password\"]', 'wrongpass');\n    await page.click('[data-test=\"login-button\"]');\n    await expect(page.locator('[data-test=\"error\"]')).toBeVisible();\n    await expect(page).not.toHaveURL(/.*inventory.html/);\n  });\n\n  test('should redirect to login when accessing inventory directly without session', async ({ page }) => {\n    await page.goto('https://www.saucedemo.com/inventory.html');\n    await expect(page).toHaveURL(/.*\\/(index.html|login.html)?$/);\n  });\n\n  test('should fail when first item title is incorrect', async ({ page }) => {\n    await login(page, 'standard_user', 'secret_sauce');\n    await mockFirstItemTitle(page, 'Wrong Title');\n    const title = await page.locator('.inventory_item:first-child .inventory_item_name').innerText();\n    expect(title).not.toBe('Sauce Labs Backpack');\n  });\n\n  test('should fail when first item price is incorrect', async ({ page }) => {\n    await login(page, 'standard_user', 'secret_sauce');\n    await mockFirstItemPrice(page, '$0.00');\n    const price = await page.locator('.inventory_item:first-child .inventory_item_price').innerText();\n    expect(price).not.toBe('$29.99');\n  });\n\n  test('should handle 500 error on inventory API', async ({ page }) => {\n    await blockInventoryApi(page);\n    await login(page, 'standard_user', 'secret_sauce');\n    await expect(page.locator('.inventory_list')).not.toBeVisible();\n  });\n\n  test('should fail when first item is hidden via CSS', async ({ page }) => {\n    await login(page, 'standard_user', 'secret_sauce');\n    await hideFirstItem(page);\n    await expect(page.locator('.inventory_item:first-child')).toBeHidden();\n  });\n\n  test('should fail when first item is removed from DOM', async ({ page }) => {\n    await login(page, 'standard_user', 'secret_sauce');\n    await removeFirstItem(page);\n    const count = await page.locator('.inventory_item').count();\n    expect(count).toBe(5);\n  });\n\n  test('should redirect to login when accessing inventory after logout', async ({ page }) => {\n    await login(page, 'standard_user', 'secret_sauce');\n    await page.click('#react-burger-menu-btn');\n    await page.click('[data-test=\"logout-sidebar-link\"]');\n    await page.goto('https://www.saucedemo.com/inventory.html');\n    await expect(page).toHaveURL(/.*\\/(index.html|login.html)?$/);\n  });\n});",
    "manualSteps": [
      "1. Navigate to https://www.saucedemo.com/",
      "2. Enter an invalid username (e.g. 'invalid_user') in the Username field",
      "3. Enter any string (e.g. 'secret') in the Password field",
      "4. Click the Login button",
      "5. Verify that an error message appears and the user is not redirected to /inventory.htm",
      "6. Navigate directly to https://www.saucedemo.com/inventory.htm without logging in",
      "7. Verify that the user is redirected back to the login page or an error page",
      "8. Log in with valid credentials (standard_user / secret_sauce)",
      "9. Once on /inventory.htm, locate the first inventory item",
      "10. Change the inner text of the first item’s title to 'Wrong Title' using browser dev-tools",
      "11. Verify that the title is no longer 'Sauce Labs Backpack'",
      "12. Change the inner text of the first item’s price to '$0.00' using browser dev-tools",
      "13. Verify that the price is not '$29.99'",
      "14. Block the network request for the inventory list (simulate 500 Internal Server Error)",
      "15. Refresh the page and verify that the inventory list does not load",
      "16. Inject CSS to hide the first item entirely",
      "17. Verify that the first item is not visible",
      "18. Inject JavaScript to remove the first item node from the DOM",
      "19. Verify that the first item does not exist in the DOM",
      "20. Log out and then navigate to /inventory.htm",
      "21. Verify that the user is redirected to the login page"
    ]
  }
]
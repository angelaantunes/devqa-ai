[
  {
    "number": 1,
    "title": "Test Login Successful",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/1",
    "utilsCode": "export async function login(page, username, password) {\n  await page.fill('[data-test=\"username\"]', username);\n  await page.fill('[data-test=\"password\"]', password);\n  await page.click('[data-test=\"login-button\"]');\n}\n\nexport async function assertLoginError(page, text) {\n  const error = page.locator('[data-test=\"error\"]');\n  await expect(error).toBeVisible();\n  await expect(error).toContainText(text);\n  // ensure we stay on login page\n  await expect(page).toHaveURL(/.*saucedemo\\.com\\/$/);\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { login, assertLoginError } from './utils.js';\n\ntest.describe('Login negative paths @swaglabs', () => {\n  test.beforeEach(async ({ page }) => {\n    await page.goto('https://www.saucedemo.com/');\n  });\n\n  test('Empty username shows required error', async ({ page }) => {\n    await login(page, '', 'secret_sauce');\n    await assertLoginError(page, 'Epic sadface: Username is required');\n  });\n\n  test('Empty password shows required error', async ({ page }) => {\n    await login(page, 'locked_out_user', '');\n    await assertLoginError(page, 'Epic sadface: Password is required');\n  });\n\n  test('Invalid credentials show generic error', async ({ page }) => {\n    await login(page, 'fake_user', 'wrong_pass');\n    await assertLoginError(page, 'Epic sadface: Username and password do not match any user in this service');\n  });\n\n  test('Locked out user shows lockout error', async ({ page }) => {\n    await login(page, 'locked_out_user', 'secret_sauce');\n    await assertLoginError(page, 'Epic sadface: Sorry, this user has been locked out.');\n  });\n\n  test('XSS in username is sanitized', async ({ page }) => {\n    const xss = '<script>alert(document.domain)</script>';\n    await login(page, xss, 'secret_sauce');\n    await assertLoginError(page, 'Epic sadface: Username and password do not match any user in this service');\n    const hasAlert = await page.evaluate(() => window.alert !== undefined);\n    expect(hasAlert).toBe(true); // alert exists but was never called\n  });\n\n  test('Offline mode shows friendly error', async ({ page, context }) => {\n    await context.setOffline(true);\n    await login(page, 'standard_user', 'secret_sauce');\n    await expect(page.locator('[data-test=\"error\"]')).toContainText(/network|offline|retry/i);\n    await context.setOffline(false);\n  });\n\n  test('Spaces in username are not trimmed', async ({ page }) => {\n    await login(page, ' standard_user ', 'secret_sauce');\n    await assertLoginError(page, 'Epic sadface: Username and password do not match any user in this service');\n  });\n\n  test('Rapid double click triggers single error', async ({ page }) => {\n    await page.fill('[data-test=\"username\"]', 'standard_user');\n    await page.fill('[data-test=\"password\"]', 'bad');\n    const loginBtn = page.locator('[data-test=\"login-button\"]');\n    await loginBtn.dblclick();\n    await expect(page.locator('[data-test=\"error\"]')).toHaveCount(1);\n  });\n\n  test('Error disappears when user types', async ({ page }) => {\n    await login(page, '', 'secret_sauce');\n    await assertLoginError(page, 'Epic sadface: Username is required');\n    await page.type('[data-test=\"username\"]', 'a');\n    await expect(page.locator('[data-test=\"error\"]')).not.toBeVisible();\n  });\n});",
    "manualSteps": [
      "1. Navigate to https://www.saucedemo.com/",
      "2. Leave the Username field empty and click Login → verify error message “Epic sadface: Username is required” appears.",
      "3. Refresh the page, enter locked_out_user in Username, leave Password empty, click Login → verify error “Epic sadface: Password is required”.",
      "4. Refresh, enter a non-existent username fake_user and any password, click Login → verify error “Epic sadface: Username and password do not match any user in this service”.",
      "5. Refresh, enter standard_user in Username and wrong_password in Password, click Login → verify same error as step 4.",
      "6. Refresh, enter locked_out_user in Username and secret_sauce in Password, click Login → verify error “Epic sadface: Sorry, this user has been locked out.”.",
      "7. Refresh, enter standard_user in Username, enter 1 character in Password, click Login → verify error about credentials not matching.",
      "8. Refresh, enter 1 character in Username, enter secret_sauce in Password, click Login → verify error about credentials not matching.",
      "9. Refresh, enter >100 characters in Username (no spaces), enter secret_sauce, click Login → verify error about credentials not matching.",
      "10. Refresh, enter standard_user, enter >100 characters in Password, click Login → verify error about credentials not matching.",
      "11. Refresh, inject <script>alert(1)</script> into Username, enter secret_sauce, click Login → verify error about credentials and that script is not executed.",
      "12. Refresh, enter standard_user, inject <img src=x onerror=alert(1)> into Password, click Login → verify error and no alert box.",
      "13. Open DevTools → Network, throttle to offline, enter standard_user/secret_sauce, click Login → verify user-friendly error message or retry button appears.",
      "14. Repeat step 2 using Enter key instead of click → verify same error.",
      "15. Refresh, double-click Login rapidly → verify only one error message appears and no double requests.",
      "16. Refresh, paste leading/trailing spaces in Username (e.g., \" standard_user \"), enter correct password, click Login → verify credentials error (spaces not trimmed).",
      "17. Refresh, enter standard_user, paste password with trailing space \"secret_sauce \", click Login → verify credentials error.",
      "18. Verify that after any failed attempt the browser remains on https://www.saucedemo.com/ (not /inventory.html).",
      "19. Verify that password input keeps text masked after failed attempt.",
      "20. Verify that error message disappears upon typing in either field (UI spec requirement)."
    ]
  },
  {
    "number": 1,
    "scenario": "positive",
    "title": "Test Login Successful",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/1",
    "filename": "test_login_successful.spec.js",
    "utilsCode": "export async function fillText(page, selector, text) {\n  await page.fill(selector, text);\n}\n\nexport async function clickElement(page, selector) {\n  await page.click(selector);\n}\n\nexport async function assertUrl(page, expectedUrl) {\n  await page.waitForURL(expectedUrl);\n}\n\nexport async function assertText(page, selector, expectedText) {\n  await page.waitForSelector(selector);\n  const text = await page.textContent(selector);\n  if (!text.includes(expectedText)) {\n    throw new Error(`Expected text \"${expectedText}\" not found in \"${text}\"`);\n  }\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { fillText, clickElement, assertUrl, assertText } from '../utils.js';\n\ntest('Test Login Successful', async ({ page }) => {\n  await page.goto('https://www.saucedemo.com');\n  await expect(page).toHaveTitle(/Swag Labs/);\n  \n  await fillText(page, 'input[placeholder=\"Username\"]', 'standard_user');\n  await fillText(page, 'input[placeholder=\"Password\"]', 'secret_sauce');\n  await clickElement(page, 'input[type=\"submit\"]');\n  \n  await assertUrl(page, 'https://www.saucedemo.com/inventory.html');\n  await assertText(page, 'span.title', 'Products');\n});",
    "manualSteps": [
      "Navigate to https://www.saucedemo.com",
      "Verify the page title contains 'Swag Labs'",
      "Locate the Username input field with placeholder 'Username'",
      "Enter the text 'standard_user' into the Username field",
      "Locate the Password input field with placeholder 'Password'",
      "Enter the text 'secret_sauce' into the Password field",
      "Click the Login button",
      "Wait for the URL to change to https://www.saucedemo.com/inventory.html",
      "Verify the current URL is https://www.saucedemo.com/inventory.html",
      "Verify the page contains the text 'Products' in the header"
    ]
  },
  {
    "number": 1,
    "scenario": "negative",
    "title": "Test Login Successful",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/1",
    "filename": "test_login_successful_negative.spec.js",
    "utilsCode": "export async function fillInput(page, selector, value) {\n  await page.fill(selector, value);\n}\n\nexport async function clickButton(page, selector) {\n  await page.click(selector);\n}\n\nexport async function getErrorMessage(page) {\n  const error = await page.locator('[data-test=\"error\"]').textContent();\n  return error?.trim();\n}\n\nexport async function isOnPage(page, url) {\n  return page.url() === url;\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { fillInput, clickButton, getErrorMessage, isOnPage } from './utils.js';\n\ntest.describe('Login - Negative Path', () => {\n  test('should NOT reach inventory page with invalid credentials', async ({ page }) => {\n    await page.goto('https://www.saucedemo.com/');\n    await expect(page).toHaveTitle(/Swag Labs/);\n\n    await fillInput(page, 'input[placeholder=\"Username\"]', 'standard_user');\n    await fillInput(page, 'input[placeholder=\"Password\"]', 'secret_sauce');\n    await clickButton(page, 'input[type=\"submit\"]');\n\n    // Negative assertions\n    const reachedInventory = await isOnPage(page, 'https://www.saucedemo.com/inventory.html');\n    expect(reachedInventory).toBe(false);\n\n    const errorText = await getErrorMessage(page);\n    expect(errorText).toBeTruthy();\n\n    await page.screenshot({ path: 'negative-login-fail.png' });\n  });\n});",
    "manualSteps": [
      "Navigate to https://www.saucedemo.com/",
      "Verify the page title is 'Swag Labs'",
      "Locate the Username input field with placeholder 'Username'",
      "Enter the text 'standard_user' into the Username field",
      "Locate the Password input field with placeholder 'Password'",
      "Enter the text 'secret_sauce' into the Password field",
      "Click the 'Login' button",
      "Verify that the browser URL is NOT https://www.saucedemo.com/inventory.html (negative assertion)",
      "Verify that an error message element is present on the page",
      "Capture the error message text and confirm it is not empty",
      "Take a screenshot of the failed login attempt for evidence"
    ]
  },
  {
    "number": 2,
    "scenario": "positive",
    "title": "Test User Locked",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/2",
    "filename": "test_user_locked_positive.spec.js",
    "utilsCode": "export async function loginWithCredentials(page, username, password) {\n  await page.fill('input[placeholder=\"Username\"]', username);\n  await page.fill('input[placeholder=\"Password\"]', password);\n  await page.click('input[type=\"submit\"]');\n}\n\nexport async function getErrorMessage(page) {\n  const errorLocator = page.locator('[data-test=\"error\"]');\n  await errorLocator.waitFor({ state: 'visible' });\n  return errorLocator.textContent();\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { loginWithCredentials, getErrorMessage } from './utils.js';\n\ntest('Locked-out user sees correct error message', async ({ page }) => {\n  await page.goto('https://www.saucedemo.com/');\n  await loginWithCredentials(page, 'locked_out_user', 'secret_sauce');\n  const message = await getErrorMessage(page);\n  expect(message).toBe('Epic sadface: Sorry, this user has been locked out.');\n});",
    "manualSteps": [
      "Navigate to https://www.saucedemo.com/",
      "Wait until the login form is fully rendered",
      "Locate the Username input field by its placeholder text 'Username'",
      "Enter the exact text locked_out_user into the Username field",
      "Locate the Password input field by its placeholder text 'Password'",
      "Enter the exact text secret_sauce into the Password field",
      "Locate the Login button",
      "Click the Login button",
      "Wait for the error container to appear",
      "Assert that the error container is visible",
      "Assert that the error text is exactly Epic sadface: Sorry, this user has been locked out.",
      "Take a screenshot of the error for evidence (optional but recommended)",
      "Mark the test as passed if all assertions are true"
    ]
  }
]
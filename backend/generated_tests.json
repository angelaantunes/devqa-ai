[
  {
    "number": 1,
    "title": "Test Login Successful",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/1",
    "utilsCode": "export async function login(page, username, password) {\n  await page.fill('[data-test=\"username\"]', username);\n  await page.fill('[data-test=\"password\"]', password);\n  await page.click('[data-test=\"login-button\"]');\n}\n\nexport async function getErrorMessage(page) {\n  return await page.textContent('[data-test=\"error\"]');\n}\n\nexport async function clearFields(page) {\n  await page.fill('[data-test=\"username\"]', '');\n  await page.fill('[data-test=\"password\"]', '');\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { login } from './utils.js';\n\ntest.describe('Login negative paths @swaglabs', () => {\n  const url = 'https://www.saucedemo.com/';\n\n  test.beforeEach(async ({ page }) => {\n    await page.goto(url);\n  });\n\n  test('Empty username shows required error', async ({ page }) => {\n    await login(page, '', '');\n    await expect(page.locator('[data-test=\"error\"]')).toContainText('Username is required');\n  });\n\n  test('Empty password shows required error', async ({ page }) => {\n    await login(page, 'standard_user', '');\n    await expect(page.locator('[data-test=\"error\"]')).toContainText('Password is required');\n  });\n\n  test('Invalid credentials show mismatch error', async ({ page }) => {\n    await login(page, 'bad_user', 'wrong123');\n    await expect(page.locator('[data-test=\"error\"]')).toContainText(\n      'Username and password do not match any user in this service'\n    );\n  });\n\n  test('Locked user shows locked error', async ({ page }) => {\n    await login(page, 'locked_out_user', 'secret_sauce');\n    await expect(page.locator('[data-test=\"error\"]')).toContainText('Sorry, this user has been locked out.');\n  });\n\n  test('Username with leading/trailing spaces fails', async ({ page }) => {\n    await login(page, ' standard_user ', 'secret_sauce');\n    await expect(page.locator('[data-test=\"error\"]')).toContainText(\n      'Username and password do not match any user in this service'\n    );\n  });\n\n  test('Password with leading/trailing spaces fails', async ({ page }) => {\n    await login(page, 'standard_user', ' secret_sauce ');\n    await expect(page.locator('[data-test=\"error\"]')).toContainText(\n      'Username and password do not match any user in this service'\n    );\n  });\n\n  test('Very long username handled gracefully', async ({ page }) => {\n    const longUser = 'a'.repeat(500);\n    await login(page, longUser, 'secret_sauce');\n    await expect(page.locator('[data-test=\"error\"]')).toContainText(\n      'Username and password do not match any user in this service'\n    );\n  });\n\n  test('Very long password handled gracefully', async ({ page }) => {\n    const longPass = 'b'.repeat(500);\n    await login(page, 'standard_user', longPass);\n    await expect(page.locator('[data-test=\"error\"]')).toContainText(\n      'Username and password do not match any user in this service'\n    );\n  });\n\n  test('Offline mode blocks login', async ({ page, context }) => {\n    await context.setOffline(true);\n    await login(page, 'standard_user', 'secret_sauce');\n    await expect(page).toHaveURL(url);\n    await expect(page.locator('[data-test=\"error\"]')).toBeVisible();\n  });\n\n  test('Rapid double click sends only one request', async ({ page }) => {\n    await page.fill('[data-test=\"username\"]', 'standard_user');\n    await page.fill('[data-test=\"password\"]', 'secret_sauce');\n    await page.dblclick('[data-test=\"login-button\"]');\n    // If login succeeded we would be on inventory.html; negative test expects failure\n    await expect(page).toHaveURL(url);\n  });\n\n  test('Enter key does not log in', async ({ page }) => {\n    await page.fill('[data-test=\"username\"]', 'standard_user');\n    await page.fill('[data-test=\"password\"]', 'secret_sauce');\n    await page.press('[data-test=\"password\"]', 'Enter');\n    await expect(page).toHaveURL(url);\n  });\n\n  test('Back button after login clears session', async ({ page }) => {\n    await login(page, 'standard_user', 'secret_sauce');\n    // Should succeed, then we go back to force negative state\n    await expect(page).toHaveURL(/.*inventory.html/);\n    await page.goBack();\n    await expect(page).toHaveURL(url);\n    await page.goto('https://www.saucedemo.com/inventory.html');\n    // Inventory should redirect to login when session missing\n    await expect(page).toHaveURL(url);\n  });\n});",
    "manualSteps": [
      "1. Navigate to https://www.saucedemo.com/",
      "2. Leave the Username field empty and click Login → verify error message “Epic sadface: Username is required” appears.",
      "3. Refresh the page, enter a valid username (standard_user) but leave Password empty and click Login → verify error message “Epic sadface: Password is required” appears.",
      "4. Refresh the page, enter an invalid username (e.g., bad_user) and an invalid password (e.g., wrong123) → click Login → verify error message “Epic sadface: Username and password do not match any user in this service” appears.",
      "5. Refresh the page, enter a valid username and an incorrect password (standard_user / badpass) → click Login → verify same error message as step 4.",
      "6. Refresh the page, enter a locked-out user (locked_out_user / secret_sauce) → click Login → verify error message “Epic sadface: Sorry, this user has been locked out.” appears.",
      "7. Refresh the page, enter username with leading/trailing spaces ( standard_user ) and correct password → click Login → verify login fails with same error as step 4.",
      "8. Refresh the page, enter username standard_user and password with leading/trailing spaces ( secret_sauce ) → click Login → verify login fails with same error as step 4.",
      "9. Refresh the page, paste a 500-character random string into Username → verify field accepts it without UI breakage; click Login → verify appropriate error.",
      "10. Refresh the page, paste a 500-character random string into Password → verify field masks characters; click Login → verify appropriate error.",
      "11. Open DevTools → Network tab → throttle network to offline → attempt login with valid credentials → verify UI shows error and no navigation occurs.",
      "12. Inject JavaScript to remove the disabled attribute from the Login button → clear both fields and attempt to click → verify button is still non-functional or shows error.",
      "13. Refresh the page, enter valid credentials and double-click Login rapidly → verify only one request is sent and no double navigation.",
      "14. Refresh the page, enter valid credentials → press Enter instead of clicking → verify login fails (negative test for Enter key).",
      "15. Refresh the page, enter valid credentials → click Login → immediately press browser Back → verify user is redirected back to login and session is not established."
    ]
  },
  {
    "number": 1,
    "scenario": "positive",
    "title": "Test Login Successful",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/1",
    "filename": "test_login_successful.spec.js",
    "utilsCode": "export async function fillText(page, selector, text) {\n  await page.fill(selector, text);\n}\n\nexport async function clickElement(page, selector) {\n  await page.click(selector);\n}\n\nexport async function assertUrl(page, expectedUrl) {\n  await page.waitForURL(expectedUrl);\n}\n\nexport async function assertText(page, selector, expectedText) {\n  await page.waitForSelector(selector);\n  const text = await page.textContent(selector);\n  if (!text.includes(expectedText)) {\n    throw new Error(`Expected text \"${expectedText}\" not found in \"${text}\"`);\n  }\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { fillText, clickElement, assertUrl, assertText } from '../utils.js';\n\ntest('Test Login Successful', async ({ page }) => {\n  await page.goto('https://www.saucedemo.com');\n  await expect(page).toHaveTitle(/Swag Labs/);\n  \n  await fillText(page, 'input[placeholder=\"Username\"]', 'standard_user');\n  await fillText(page, 'input[placeholder=\"Password\"]', 'secret_sauce');\n  await clickElement(page, 'input[type=\"submit\"]');\n  \n  await assertUrl(page, 'https://www.saucedemo.com/inventory.html');\n  await assertText(page, 'span.title', 'Products');\n});",
    "manualSteps": [
      "Navigate to https://www.saucedemo.com",
      "Verify the page title contains 'Swag Labs'",
      "Locate the Username input field with placeholder 'Username'",
      "Enter the text 'standard_user' into the Username field",
      "Locate the Password input field with placeholder 'Password'",
      "Enter the text 'secret_sauce' into the Password field",
      "Click the Login button",
      "Wait for the URL to change to https://www.saucedemo.com/inventory.html",
      "Verify the current URL is https://www.saucedemo.com/inventory.html",
      "Verify the page contains the text 'Products' in the header"
    ]
  },
  {
    "number": 1,
    "scenario": "negative",
    "title": "Test Login Successful",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/1",
    "filename": "test_login_successful_negative.spec.js",
    "utilsCode": "export async function fillInput(page, selector, value) {\n  await page.fill(selector, value);\n}\n\nexport async function clickButton(page, selector) {\n  await page.click(selector);\n}\n\nexport async function getErrorMessage(page) {\n  const error = await page.locator('[data-test=\"error\"]').textContent();\n  return error?.trim();\n}\n\nexport async function isOnPage(page, url) {\n  return page.url() === url;\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { fillInput, clickButton, getErrorMessage, isOnPage } from './utils.js';\n\ntest.describe('Login - Negative Path', () => {\n  test('should NOT reach inventory page with invalid credentials', async ({ page }) => {\n    await page.goto('https://www.saucedemo.com/');\n    await expect(page).toHaveTitle(/Swag Labs/);\n\n    await fillInput(page, 'input[placeholder=\"Username\"]', 'standard_user');\n    await fillInput(page, 'input[placeholder=\"Password\"]', 'secret_sauce');\n    await clickButton(page, 'input[type=\"submit\"]');\n\n    // Negative assertions\n    const reachedInventory = await isOnPage(page, 'https://www.saucedemo.com/inventory.html');\n    expect(reachedInventory).toBe(false);\n\n    const errorText = await getErrorMessage(page);\n    expect(errorText).toBeTruthy();\n\n    await page.screenshot({ path: 'negative-login-fail.png' });\n  });\n});",
    "manualSteps": [
      "Navigate to https://www.saucedemo.com/",
      "Verify the page title is 'Swag Labs'",
      "Locate the Username input field with placeholder 'Username'",
      "Enter the text 'standard_user' into the Username field",
      "Locate the Password input field with placeholder 'Password'",
      "Enter the text 'secret_sauce' into the Password field",
      "Click the 'Login' button",
      "Verify that the browser URL is NOT https://www.saucedemo.com/inventory.html (negative assertion)",
      "Verify that an error message element is present on the page",
      "Capture the error message text and confirm it is not empty",
      "Take a screenshot of the failed login attempt for evidence"
    ]
  },
  {
    "number": 2,
    "scenario": "positive",
    "title": "Test User Locked",
    "url": "https://github.com/angelaantunes/devqa-ai/issues/2",
    "filename": "test_user_locked_positive.spec.js",
    "utilsCode": "export async function loginWithCredentials(page, username, password) {\n  await page.fill('input[placeholder=\"Username\"]', username);\n  await page.fill('input[placeholder=\"Password\"]', password);\n  await page.click('input[type=\"submit\"]');\n}\n\nexport async function getErrorMessage(page) {\n  const errorLocator = page.locator('[data-test=\"error\"]');\n  await errorLocator.waitFor({ state: 'visible' });\n  return errorLocator.textContent();\n}",
    "playwrightCode": "import { test, expect } from '@playwright/test';\nimport { loginWithCredentials, getErrorMessage } from './utils.js';\n\ntest('Locked-out user sees correct error message', async ({ page }) => {\n  await page.goto('https://www.saucedemo.com/');\n  await loginWithCredentials(page, 'locked_out_user', 'secret_sauce');\n  const message = await getErrorMessage(page);\n  expect(message).toBe('Epic sadface: Sorry, this user has been locked out.');\n});",
    "manualSteps": [
      "Navigate to https://www.saucedemo.com/",
      "Wait until the login form is fully rendered",
      "Locate the Username input field by its placeholder text 'Username'",
      "Enter the exact text locked_out_user into the Username field",
      "Locate the Password input field by its placeholder text 'Password'",
      "Enter the exact text secret_sauce into the Password field",
      "Locate the Login button",
      "Click the Login button",
      "Wait for the error container to appear",
      "Assert that the error container is visible",
      "Assert that the error text is exactly Epic sadface: Sorry, this user has been locked out.",
      "Take a screenshot of the error for evidence (optional but recommended)",
      "Mark the test as passed if all assertions are true"
    ]
  }
]